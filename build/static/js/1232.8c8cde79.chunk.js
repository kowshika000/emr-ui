"use strict";(self.webpackChunkemr_ui=self.webpackChunkemr_ui||[]).push([[1232],{47082:(e,a,t)=>{var l=t(50318),n=t.n(l),i=t(60775),o=t(23512),r=t(735),s=t(22235);const d=(0,l.createContext)({toggleColorMode:()=>{}});var c=t(81554),u=t(52724),p=(t(46442),t(7319)),m=t(27550),h=t(54587),x=t(45721),v=t(55316),g=t(22530),b=t(24392),j=t(70996),y=t.n(j);const f=y().create({baseURL:"http://ec2-16-171-232-159.eu-north-1.compute.amazonaws.com:8080/app/"});f.interceptors.request.use((e=>(e.data instanceof FormData?e.headers["Content-Type"]="multipart/form-data":e.headers["Content-Type"]="application/json",e)));const C=f,S="auth/signin",N="admin/getAllBranches",w="doctorappointment/getAllAppointments",I="doctor/getAllDoctors",D="facility/getAllFacilitiesByBranchAndDate",T="timeslot/getAvailableSlotsForAllDoctors",k="facility/getAllFacilitySchedules",A="timeslot/getAvailableSlotsForAllFacilities",P="doctor/searchDoctors",B="facility/searchFacilities",R="patient/searchPatients",_="patient/patientRegistration",F="patient/patientRevisit",E="patient/patientEmergency",L="doctorappointment/bookAppointment",M="doctorappointment/getScheduleList",O="doctorappointment/rescheduleAppointment",z="doctorappointment/cancelAppointment",W="patient/today",Y=(0,b.createAsyncThunk)("auth/login",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.post(S,e)}catch(i){var l,n;return t((null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)||"Login Failed")}})),V=(0,b.createSlice)({name:"auth",initialState:{user:[],loading:!1,error:null},reducers:{logout:e=>{e.user=null,e.loading=!1,e.error=null,localStorage.removeItem("user"),localStorage.removeItem("rememberedUsername")}},extraReducers:e=>{e.addCase(Y.pending,(e=>{e.loading=!0,e.error=null})).addCase(Y.fulfilled,((e,a)=>{e.loading=!1,e.user=a.payload.data,localStorage.setItem("user",JSON.stringify(a.payload.data))})).addCase(Y.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}),{logout:H}=V.actions,q=V.reducer,G=(0,b.createAsyncThunk)("admin/branch",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(N,e)}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),$=(0,b.createSlice)({name:"allBranch",initialState:{data:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(G.pending,(e=>{e.loading=!0,e.error=null})).addCase(G.fulfilled,((e,a)=>{e.loading=!1,e.data=a.payload.data})).addCase(G.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer;var U=t(28339),K=t(44238),J=t(56723);const Q=(0,o.connect)((e=>{var a,t,l,n,i,o,r,s,d,c;return{branchId:null===e||void 0===e||null===(a=e.auth)||void 0===a||null===(t=a.user)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.branchMaster.branchId,username:null===e||void 0===e||null===(n=e.auth)||void 0===n||null===(i=n.user)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.userName,role:null===e||void 0===e||null===(r=e.auth)||void 0===r||null===(s=r.user)||void 0===s||null===(d=s.data)||void 0===d||null===(c=d.roleMaster)||void 0===c?void 0:c.roleName}}))((e=>{var a,t;let{reloadApp:n,branchId:i,username:s,role:c}=e;const[u,b]=(0,l.useState)([]),[j,y]=(0,l.useState)(null),[f,C]=(0,l.useState)(null);(0,l.useEffect)((()=>{const e=localStorage.getItem("user");if(e){var a,t;const l=JSON.parse(e);y(l.data),C((null===(a=l.data)||void 0===a||null===(t=a.branchMaster)||void 0===t?void 0:t.branchId)||null),console.log("userData",l.data)}else console.log("No user data found in localStorage")}),[]);const S=window.location.href,N=(0,o.useDispatch)(),{data:w}=(0,o.useSelector)((e=>null===e||void 0===e?void 0:e.allBranch)),I=null===w||void 0===w?void 0:w.data,D=(0,p.useNavigate)();(0,l.useEffect)((()=>{null!==I&&void 0!==I&&I.length||N(G())}),[N,I]),(0,l.useEffect)((()=>{I&&b(I)}),[w]);const T=(0,r.useTheme)(),k=(0,l.useContext)(d),[A,P]=(0,l.useState)(!1),B=f?null===(a=u.find((e=>e.branchId===f)))||void 0===a?void 0:a.branchName:"Select Branch";return(0,J.jsxs)(r.Box,{id:"topbar",display:"flex",justifyContent:"space-between",p:2,padding:"5px 16px",height:"10%",sx:{backgroundColor:"#71BBB2",color:"black"},children:[S.includes("secure")&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(r.Box,{display:"flex",my:"auto",gap:"10px",children:[(0,J.jsx)(r.Box,{alignSelf:"center",fontSize:"26px",children:"E M R"}),(0,J.jsx)(r.IconButton,{onClick:()=>D("/secure/landing"),children:(0,J.jsx)(U.Menu,{})})]}),(0,J.jsxs)(r.Box,{display:"flex",my:"auto",gap:2,children:[(0,J.jsx)("div",{className:"my-auto ",children:(0,J.jsx)(r.Chip,{label:null===j||void 0===j||null===(t=j.roleMaster)||void 0===t?void 0:t.roleName,variant:"outlined",sx:{fontSize:"12px"}})}),(0,J.jsxs)(r.Box,{alignSelf:"center",sx:{position:"relative",backgroundColor:"transparent",borderRadius:"5px",padding:"5px",cursor:"pointer"},children:[(0,J.jsx)(r.Box,{display:"flex",alignItems:"center",onClick:()=>P(!A),sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:(0,J.jsx)(r.Chip,{icon:(0,J.jsx)(K.A,{color:"white"}),label:B,sx:{backgroundColor:"#71BBB2",fontSize:"12px",textTransform:"capitalize","&:hover":{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.2)",transform:"scale(1.05)"}}})}),A&&(0,J.jsx)(r.Box,{sx:{position:"absolute",top:"40px",left:"0",right:"0",backgroundColor:"rgb(204, 219, 219)",borderRadius:"5px",zIndex:1,minWidth:"140px",overflowY:"auto",color:"black"},children:u.map((e=>(0,J.jsx)(m.A,{onClick:()=>(e=>{C(e),P(!1)})(e.branchId),children:e.branchName},e.branchId)))})]}),(0,J.jsx)(r.IconButton,{onClick:k.toggleColorMode,children:"dark"===T.palette.mode?(0,J.jsx)(x.A,{}):(0,J.jsx)(h.A,{})}),(0,J.jsx)(r.IconButton,{children:(0,J.jsx)(v.A,{})}),(0,J.jsx)(r.IconButton,{sx:{margin:"0 10px"},onClick:()=>{N(H()),D("/login")},children:(0,J.jsx)(g.A,{})})]})]}),(0,J.jsx)(J.Fragment,{})]})}));t(49154),t(92421);t(89661),t(23253);var X=t(28938);const Z=[{name:"Appointment",icon:(0,J.jsx)(X.gUT,{}),path:"/secure/appointment",color:"#6B8E23"},{name:"Registration",icon:(0,J.jsx)(X.NPy,{}),path:"/secure/registration",color:"#FFA500"},{name:"Doctor EMR",icon:(0,J.jsx)(X.ifA,{}),path:"/secure/doctorEmr",color:"#9932CC"},{name:"Nurse EMR",icon:(0,J.jsx)(X.U74,{}),path:"/secure/nurseEmr",color:"#A52A2A"},{name:"Billing",icon:(0,J.jsx)(X.xXS,{}),path:"/secure/billing/list",color:"#008080"},{name:"Report",icon:(0,J.jsx)(X.t69,{}),path:"/secure",color:"#FF6B6B"},{name:"IP EMR",icon:(0,J.jsx)(X.WfF,{}),path:"/secure/ipemr",color:"#4169E1"},{name:"Bed & Ward",icon:(0,J.jsx)(X.TiC,{}),path:"/secure/bedandward",color:"#A52A2A"},{name:"Laboratory",icon:(0,J.jsx)(X.XcJ,{}),path:"/secure/lab",color:"#32CD32"},{name:"Master",icon:(0,J.jsx)(X.kkc,{}),path:"/secure/master",color:"#FF6B6B"}],ee=()=>{const e=(0,p.useNavigate)(),[a,t]=(0,l.useState)([]);return(0,l.useEffect)((()=>{const e=localStorage.getItem("user");if(e){var a,l;const n=JSON.parse(e),i=(null===n||void 0===n||null===(a=n.data)||void 0===a||null===(l=a.roleMaster)||void 0===l?void 0:l.roleName)||"";let o=[];o="Receptionist"===i?Z.filter((e=>"Appointment"===e.name||"Registration"===e.name||"Billing"===e.name||"Report"===e.name)):"Billing"===i?Z.filter((e=>"Billing"===e.name||"Report"===e.name)):Z,t(o)}}),[]),(0,J.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",padding:"20px",width:"100%"},children:(0,J.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"20px",maxWidth:"900px",justifyContent:"center"},className:"mx-auto",children:a.length>0?a.map(((a,t)=>(0,J.jsxs)("div",{onClick:()=>e(a.path),style:{backgroundColor:a.color,width:"150px",height:"150px",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",color:"white",fontSize:"18px",fontWeight:"bold",textAlign:"center",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.1)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:[(0,J.jsx)("div",{style:{fontSize:"40px",marginBottom:"10px"},children:a.icon}),a.name]},t))):(0,J.jsx)("p",{children:"No modules available for your role"})})})},ae=e=>{let{children:a}=e;const[t,n]=(0,l.useState)(!0);window.location.href;return(0,J.jsxs)("div",{className:"app",children:[(0,J.jsx)(Q,{setIsSidebar:n}),(0,J.jsx)("main",{className:"content",children:a})]})},te=e=>{const[a,t]=(0,l.useState)(),n=(0,p.useNavigate)(),i=(0,o.useSelector)((e=>{var a;return null===e||void 0===e||null===(a=e.auth)||void 0===a?void 0:a.user})),r=()=>null!==localStorage.getItem("user");(0,l.useEffect)((()=>{r()?n("/secure/landing",{replace:!0}):n("/login",{replace:!0})}),[]),(0,l.useEffect)((()=>{s()}),[i]);const s=()=>{const a=e.routes.map((async a=>await async function(a){let t=a.component;e.interceptor&&(t=await e.interceptor(a));if(a.secure)return r()?(0,J.jsx)(p.Route,{path:a.path,exact:a.exact,element:(0,J.jsx)(ae,{children:(0,J.jsx)(t,{})})},a.path):(0,J.jsx)(p.Route,{path:a.path,exact:a.exact,element:(0,J.jsx)(p.Navigate,{to:"/login"})},a.path);return(0,J.jsx)(p.Route,{path:a.path,exact:a.exact,element:(0,J.jsx)(t,{})},a.path)}(a)));Promise.all(a).then((e=>{t(e)}))};return(0,J.jsx)(p.Routes,{children:a})};var le=t(22015);const ne=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const t=(0,J.jsx)(ie,{messages:e}),l={autoClose:1e4};switch(a){case"success":le.toast.success(t,l);break;case"error":le.toast.error(t,l);break;case"warning":le.toast.warn(t,l);break;default:le.toast.info(t,l)}},ie=e=>{let{messages:a}=e;const t=Array.isArray(a)?a:[a];return(0,J.jsx)("div",{children:null===t||void 0===t?void 0:t.map(((e,a)=>(0,J.jsx)("ul",{children:(0,J.jsx)("li",{children:e})},`${e}_${a}`)))})},oe=e=>{let{setShowForgotPage:a,setShowLoginPage:t,setShowSignup:n}=e;const[i,s]=(0,l.useState)({email:"",password:""}),[d,c]=(0,l.useState)({}),u=(0,o.useDispatch)(),m=(0,p.useNavigate)(),{loading:h}=(0,o.useSelector)((e=>e.auth)),x=e=>a=>{s({...i,[e]:a.target.value}),c((a=>({...a,[e]:""})))};return(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{className:"title",children:"Account Login"}),(0,J.jsx)("div",{className:"desc",children:"If you are already a member you can login with your email address and password."}),(0,J.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=(()=>{const e={};return i.email.trim()||(e.email="Email is required"),i.password||(e.password="Password is required"),e})();if(0===Object.keys(a).length)try{const e=await u(Y(i));Y.fulfilled.match(e)?m("/secure/landing"):ne("Invalid email or password!")}catch(t){ne("Something went wrong!!")}else c(a),ne("Something went wrong!!")},children:[(0,J.jsx)(r.TextField,{label:"Email Address",variant:"outlined",fullWidth:!0,margin:"normal",error:!!d.email,onChange:x("email"),size:"small"}),(0,J.jsx)(r.TextField,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",error:!!d.password,onChange:x("password"),size:"small"}),(0,J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:[(0,J.jsx)(r.FormControlLabel,{control:(0,J.jsx)(r.Checkbox,{}),label:"Remember me"}),(0,J.jsx)("div",{style:{alignSelf:"center"},children:(0,J.jsx)("div",{onClick:()=>{t(!1),a(!0)},className:"forgot-password-link",children:"Forgot Password ?"})})]}),(0,J.jsx)(r.Button,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:h,children:h?(0,J.jsx)(r.CircularProgress,{size:24}):"Login"}),(0,J.jsxs)("div",{className:"signup-info",children:["Don't have an account ?\xa0",(0,J.jsx)("div",{onClick:()=>{n(!0),t(!1)},className:"signup-link",children:"Sign up here"})]})]})]})},re=e=>{let{setShowLoginPage:a,setShowSignup:t}=e;return(0,J.jsxs)("div",{children:[(0,J.jsx)("h2",{children:"Register Account"}),(0,J.jsxs)("form",{children:[(0,J.jsx)(r.TextField,{label:"Email Address",variant:"outlined",fullWidth:!0,margin:"normal",size:"small"}),(0,J.jsx)(r.TextField,{label:"Phone Number",variant:"outlined",fullWidth:!0,margin:"normal",size:"small"}),(0,J.jsx)(r.TextField,{label:"Enter Password",variant:"outlined",fullWidth:!0,margin:"normal",size:"small"}),(0,J.jsx)(r.TextField,{label:"Confirm Password",variant:"outlined",fullWidth:!0,margin:"normal",size:"small"}),(0,J.jsx)("div",{className:"mt-2",children:(0,J.jsx)(r.Button,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Register"})})]}),(0,J.jsxs)("div",{className:"signup-info",children:["Already have an account ?\xa0",(0,J.jsx)("div",{onClick:()=>{a(!0),t(!1)},className:"signup-link",children:"Login"})]})]})},se=e=>{let{setShowForgotPage:a,setShowLoginPage:t,setShowReset:n}=e;const[i,o]=(0,l.useState)({email:""}),[s,d]=(0,l.useState)({});return(0,J.jsxs)("div",{children:[(0,J.jsx)("h2",{children:"Forgot Password"}),(0,J.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{let e={};return i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(e.email="Enter a valid email"):e.email="Email is required",e})();Object.keys(t).length>0?d(t):(console.log("Sending reset email to:",i.email),n(!0),a(!1))},children:[(0,J.jsx)(r.TextField,{label:"Email address",variant:"outlined",fullWidth:!0,margin:"normal",size:"small",error:!!s.email,value:i.email,onChange:e=>{o({email:e.target.value}),d((e=>({...e,email:""})))}}),(0,J.jsx)("div",{className:"mt-2",children:(0,J.jsx)(r.Button,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Send to Email"})})]}),(0,J.jsxs)("div",{className:"signup-info",children:["Back to\xa0",(0,J.jsx)("div",{onClick:()=>{t(!0),a(!1)},className:"signup-link",children:"Login"})]})]})},de=y().create({baseURL:"http://ec2-16-171-230-69.eu-north-1.compute.amazonaws.com:8080/",headers:{"Content-Type":"application/json"}});de.interceptors.request.use((e=>{const a=localStorage.getItem("branchId");if(a)if("get"===e.method){const t=new URL(e.url,e.baseURL);t.searchParams.append("branchId",parseInt(a)),e.url=t.pathname+t.search}else e.data?e.data={...e.data,branchId:a}:e.data={branchId:a};return e}),(e=>Promise.reject(e))),de.interceptors.response.use((e=>e),(e=>(console.error("API call error:",e),Promise.reject(e))));const ce=de,ue=async(e,a)=>{console.log(a,"params");try{return(await ce.get(`${e}?doctorId=${null===a||void 0===a?void 0:a.doctorId}&ipOpFlag=${null===a||void 0===a?void 0:a.ipOpFlag}&context=${null===a||void 0===a?void 0:a.context}&page=${null===a||void 0===a?void 0:a.page}&size=${null===a||void 0===a?void 0:a.size}&ptName=${null===a||void 0===a?void 0:a.ptName}&status=${null===a||void 0===a?void 0:a.status}`)).data}catch(t){throw console.error("Error fetching doctor dashboard data:",t),t}},pe=(0,l.createContext)(),me=e=>{let{children:a}=e;const[t,n]=(0,l.useState)(!1);return(0,J.jsx)(pe.Provider,{value:{loading:t,setLoading:n},children:a})},he=()=>(0,l.useContext)(pe),xe=()=>{const[e,a]=(0,l.useState)({password:"",confirmPassword:""}),[t,n]=(0,l.useState)({}),[i,o]=(0,l.useState)(""),[s,d]=(0,l.useState)(""),{loading:c,setLoading:u}=he(),p=t=>l=>{a({...e,[t]:l.target.value}),n((e=>({...e,[t]:""})))};return(0,J.jsxs)("div",{children:[(0,J.jsx)("h2",{children:"Password Reset"}),s&&(0,J.jsx)(r.Alert,{severity:"error",children:s}),i&&(0,J.jsx)(r.Alert,{severity:"success",children:i}),(0,J.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),o(""),d("");const t=(()=>{let a={};return e.password.trim()||(a.password="Password is required"),e.confirmPassword.trim()||(a.confirmPassword="Confirm Password is required"),e.password!==e.confirmPassword&&(a.confirmPassword="Passwords do not match"),a})();if(Object.keys(t).length>0)return void n(t);u(!0);const l=window.location.search,i=new URLSearchParams(l).get("token");try{const a=await(async(e,a)=>{try{return(await ce.post(e,a)).data}catch(t){throw t}})(`/auth/resetPassword?token=${i}&newPassword=${e.password}&confirmPassword=${e.confirmPassword}`);u(!1),a.status?o("Password has been reset successfully."):d(a.message||"Failed to reset password.")}catch(r){u(!1),d("Invalid or expired token")}},children:[(0,J.jsx)(r.TextField,{label:"Enter Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",error:!!t.password,helperText:t.password,onChange:p("password"),size:"small"}),(0,J.jsx)(r.TextField,{label:"Confirm Password",type:"password",variant:"outlined",fullWidth:!0,margin:"normal",error:!!t.confirmPassword,value:e.confirmPassword,onChange:p("confirmPassword"),size:"small"}),(0,J.jsx)("div",{className:"mt-2",children:(0,J.jsx)(r.Button,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:c,children:c?(0,J.jsx)(r.CircularProgress,{size:24}):"Submit"})})]})]})},ve=t.p+"static/media/bgImg.8aa256ec841ea7969ab5.jpg",ge=[{path:"*",component:()=>(0,J.jsx)(p.Navigate,{to:"/login"})},{path:"/login",component:()=>{const[e,a]=(0,l.useState)(!0),[t,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),[s,d]=(0,l.useState)(!1);return(0,J.jsx)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:`url(${ve})`,backgroundSize:"cover",width:"100%"},children:(0,J.jsxs)(r.Paper,{elevation:5,sx:{p:4,width:400,bgcolor:"rgba(255, 255, 255, 0.8)",opacity:"75%"},children:[e&&(0,J.jsx)(oe,{setShowForgotPage:n,setShowLoginPage:a,setShowSignup:o}),t&&(0,J.jsx)(se,{setShowForgotPage:n,setShowLoginPage:a,setShowReset:d}),i&&(0,J.jsx)(re,{setShowLoginPage:a,setShowSignup:o}),s&&(0,J.jsx)(xe,{})]})})}},{path:"/register",component:re},{path:"/forgot-password",component:se},{path:"/reset-password",component:xe}],be=e=>{let{children:a,style:t,...l}=e;return(0,J.jsx)("div",{style:{width:"100vw",height:"100vh",overflow:"auto",boxSizing:"border-box",backgroundColor:"#68727a05",...t},...l,children:a})};var je=t(9118),ye=t(7674);t(88829);const{TabPane:fe}=je.Tabs,Ce=e=>{var a;let{tabsList:t,defaultTab:n,setActiveTab:i}=e;const[o,r]=(0,l.useState)(null!==n&&void 0!==n?n:null===(a=t[0])||void 0===a?void 0:a.value);return(0,J.jsxs)("div",{style:{width:"100%"},children:[(0,J.jsx)(je.Tabs,{activeKey:o,onChange:e=>{r(e),i(e)},type:"card",tabBarStyle:{},style:{width:"100%"},children:t.map((e=>(0,J.jsx)(fe,{tab:(0,J.jsx)("span",{children:e.name})},e.value)))}),(0,J.jsx)("div",{children:(0,J.jsx)(ye.AnimatePresence,{mode:"wait",children:t.map((e=>e.value===o?(0,J.jsx)(ye.motion.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:-100,opacity:0},transition:{duration:.3},style:{position:"absolute",width:"100%"},children:e.content},e.value):null))})})]})};var Se=t(98046),Ne=t(43838);const we=e=>{const a=new Date(e),t=new Date;let l=t.getFullYear()-a.getFullYear();const n=t.getMonth()-a.getMonth();return(n<0||0===n&&t.getDate()<a.getDate())&&l--,l},Ie=e=>{let{label:a,value:t,onChange:n,type:i="text",options:o=[],required:s=!1,setDependentValue:d,...c}=e;const[u,p]=(0,l.useState)(!1),[m,h]=(0,l.useState)(t||null),x=()=>{p(s&&!t)};return(0,J.jsx)(r.Box,{sx:{width:"100%"},children:"select"===i?(0,J.jsxs)(r.FormControl,{required:s,error:u,size:"small",sx:{width:"100%"},children:[(0,J.jsx)(r.InputLabel,{children:a}),(0,J.jsxs)(r.Select,{value:t||"",onChange:e=>{const a=o.find((a=>a.label===e.target.value));n((null===a||void 0===a?void 0:a.label)||""),p(s&&!(null!==a&&void 0!==a&&a.label))},onBlur:x,label:a,sx:{width:"100%"},...c,children:[(0,J.jsxs)(r.MenuItem,{value:"",disabled:!0,children:["Select ",a]}),o.map(((e,a)=>(0,J.jsx)(r.MenuItem,{value:e.label,sx:{fontSize:"12px"},children:e.label},a)))]})]}):"file"===i?(0,J.jsx)(r.Box,{children:m?(0,J.jsxs)(r.Box,{sx:{display:"flex",alignItems:"center",border:"1px solid #ccc",borderRadius:"4px",padding:"4px 8px",backgroundColor:"#f9f9f9",justifyContent:"space-between"},children:[(0,J.jsx)(r.Typography,{sx:{fontSize:"14px",color:"#333"},children:m.name}),(0,J.jsx)(r.IconButton,{size:"small",onClick:()=>{h(null),n(null)},children:(0,J.jsx)(Ne.A,{fontSize:"small"})})]}):(0,J.jsxs)(r.Button,{variant:"outlined",component:"label",className:"w-100 my-auto",children:["Upload ",a,(0,J.jsx)("input",{type:"file",hidden:!0,onChange:e=>{const a=e.target.files[0];a&&(h(a),n(a),p(!1))}})]})}):(0,J.jsx)(r.TextField,{label:a,value:"date"===i?(v=t,v?new Date(v).toISOString().split("T")[0]:""):"datetime-local"===i?(e=>{if(!e)return"";return new Date(e).toISOString().slice(0,19).replace("T"," ")})(t):t,onChange:e=>{let a=e.target.value;"datetime-local"===i&&(a=a.replace("T"," ")),n(a),"date"===i&&d&&d(we(a)),p(s&&!a)},onBlur:x,size:"small",fullWidth:!0,required:s,type:"textarea"===i?void 0:i,multiline:"textarea"===i,rows:"textarea"===i?2:void 0,error:u,InputLabelProps:{shrink:"date"===i||"time"===i||"datetime-local"===i||void 0},inputProps:{..."date"===i&&{pattern:"\\d{4}-\\d{2}-\\d{2}"},..."datetime-local"===i&&{step:1}},...c})});var v};const De={visitOptions:[{id:"6",label:"In Patient",value:"ip"},{id:"7",label:"Out Patient",value:"op"}],genderOpton:[{label:"Select",value:""},{label:"Female",value:"female"},{label:"Male",value:"male"},{label:"Other",value:"other"}],nationalityOptions:(0,t(27141).getNames)().map((e=>({value:e.toLowerCase(),label:e}))),visaTypeOptions:[{id:"1",label:"Local",value:"local"},{id:"2",label:"Resident",value:"resident"},{id:"3",label:"Visitor",value:"visitor"}],specialityOptions:[{id:"1",label:"speciality 1",value:"speciality_1"},{id:"2",label:"speciality 2",value:"speciality_2"}],encounterTypeOptions:[{id:"1",label:"No Bed + No Emergency Room",value:"no_bed_no_emergency_room"},{id:"2",label:"No Bed + Emergency Room",value:"no_bed_emergency_room"},{id:"3",label:"Daycase Bed + No Emergency Room",value:"daycase_bed_no_emergency_room"},{id:"4",label:"Daycase Bed + Emergency Room",value:"daycase_bed_emergency_room"}],ipEncounterTypeOptions:[{id:"1",label:"daycase bed + emergency  ",value:"daycase_emergency_room"}],doctorOptions:[{id:"1",label:"Doctor 1",value:"doctor_1"},{id:"2",label:"Doctor 2",value:"doctor_2"}],paymentOptions:[{id:"1",label:"Cash",value:"cash"},{id:"2",label:"Insurance",value:"insurance"},{id:"3",label:"Corporate",value:"corporate"}],infoSourceOptions:[{id:"1",label:"Event",value:"event"},{id:"2",label:"Family and Friends",value:"family_and_friends"},{id:"3",label:"Fazaa",value:"fazaa"},{id:"4",label:"Google",value:"google"},{id:"5",label:"My Alfred App",value:"my_alfred_app"},{id:"6",label:"Promotions",value:"promotion"},{id:"7",label:"Social Media",value:"social_media"},{id:"8",label:"Website",value:"website"}],patientTypeOptions:[{id:"1",label:"Normal",value:"normal"},{id:"2",label:"Recruitment",value:"recruitment"},{id:"3",label:"Pre-Employment",value:"pre-employment"},{id:"4",label:"VIP",value:"vip"},{id:"5",label:"VVIP",value:"vvip"},{id:"6",label:"Determination",value:"determination"}],otherIdOptions:[{id:"1",label:"Passport",value:"passport"},{id:"2",label:"GCC ID",value:"gcc_id"},{id:"3",label:"Driving License",value:"driving_license"}],addressOptions:[{id:"1",label:"Dubai",value:"Dubai"},{id:"2",label:"Abu Dhabi",value:"Abu Dhabi"},{id:"3",label:"Sharjah",value:"Sharjah"},{id:"4",label:"Fujairah",value:"Fujairah"},{id:"5",label:"Ras Al Khaimah",value:"Ras Al Khaimah"},{id:"6",label:"Umm Al Quwain",value:"Umm Al Quwain"},{id:"7",label:"Ajman",value:"Ajman"},{id:"8",label:"Others",value:"Others"},{id:"9",label:"Unknown",value:"Unknown"}],referralOptions:[{id:"1",label:"Yes",value:"yes"},{id:"2",label:"No",value:"no"}],religionOptions:[{id:"1",label:"Buddhist",value:"BUD"},{id:"2",label:"Buddhist: Mahayana",value:"BMA"},{id:"3",label:"Buddhist: Theravada",value:"BTH"},{id:"4",label:"Christian",value:"CHR"},{id:"5",label:"Christian: Anglican",value:"ANG"},{id:"6",label:"Christian: Baptist",value:"BAP"},{id:"7",label:"Christian: Christian Science",value:"CHS"},{id:"8",label:"Christian: Episcopalian",value:"EPI"},{id:"9",label:"Christian: Greek Orthodox",value:"GRE"},{id:"10",label:"Christian: Jehovah's Witness",value:"JWN"},{id:"11",label:"Christian: Lutheran",value:"LUT"},{id:"12",label:"Christian: Mennonite",value:"MEN"},{id:"13",label:"Christian: Methodist",value:"MET"},{id:"14",label:"Christian: Pentecostal",value:"PEN"},{id:"15",label:"Christian: Presbyterian",value:"PRE"},{id:"16",label:"Christian: Protestant",value:"PRO"},{id:"17",label:"Christian: Roman Catholic",value:"CAT"},{id:"18",label:"Christian: Seventh Day Adventist",value:"SEV"},{id:"19",label:"Christian: Unitarian Universalist",value:"UNU"},{id:"20",label:"Ethnic Religionist",value:"ERL"},{id:"21",label:"Hindu",value:"HIN"},{id:"22",label:"Hindu: Other",value:"HOT"},{id:"23",label:"Jain",value:"JAI"},{id:"24",label:"Jewish",value:"JEW"},{id:"25",label:"Muslim",value:"MOS"},{id:"26",label:"Muslim: Other",value:"MOT"},{id:"27",label:"Muslim: Shiite",value:"MSH"},{id:"28",label:"Muslim: Sunni",value:"MSU"},{id:"29",label:"Other",value:"OTH"},{id:"30",label:"Sikh",value:"SIK"},{id:"31",label:"Shintoist",value:"SHN"},{id:"32",label:"Unknown",value:"VAR"}],patientPriorityOptions:[{id:"1",label:"Normal",value:"normal"},{id:"2",label:"VIP",value:"vip"},{id:"3",label:"VVIP",value:"vvip"}],maritalStatusOptions:[{id:"1",label:"Annulled",value:"annulled"},{id:"2",label:"Divorced",value:"divorced"},{id:"3",label:"Legally Married",value:"legally_married"},{id:"4",label:"Married",value:"married"},{id:"5",label:"Other",value:"other"},{id:"6",label:"Separated",value:"separated"},{id:"7",label:"Single",value:"single"},{id:"8",label:"Unknown",value:"unknown"},{id:"9",label:"Widowed",value:"widowed"},{id:"10",label:"Unmarried",value:"unmarried"}],occupationOptions:[{value:"",label:"--Please choose an option--"},{value:"agriculture",label:"Agriculture"},{value:"airlines",label:"Airlines"},{value:"healthcare",label:"Healthcare and medicine"},{value:"arts",label:"Arts and entertainment"},{value:"banking",label:"Banking and Finance"},{value:"blue_collar",label:"Blue Collar"},{value:"business",label:"Business"},{value:"consultant",label:"Consultant"},{value:"industrial",label:"Industrial and manufacturing"},{value:"home_maker",label:"Home Maker"},{value:"hospitality",label:"Hospitality"},{value:"it_professional",label:"IT Professional"},{value:"law_enforcement",label:"Law enforcement and armed forces"},{value:"lawyer",label:"Lawyer"},{value:"media",label:"Media"},{value:"mining",label:"Mining"},{value:"other",label:"Other"},{value:"research",label:"Research"},{value:"retired",label:"Retired"},{value:"road_transport",label:"Road Transport"},{value:"science_technology",label:"Science and technology"},{value:"shipping",label:"Shipping"},{value:"skilled_labor",label:"Skilled Labor"},{value:"sports",label:"Sports"},{value:"student",label:"Student"},{value:"teacher",label:"Teacher"},{value:"unknown",label:"Unknown"}]},Te=(0,b.createAsyncThunk)("patient/registerPatients",(async(e,a)=>{let{rejectWithValue:t}=a;try{const a=new FormData;Object.keys(e).forEach((t=>{a.append(t,e[t])}));return(await C.post(_,a)).data}catch(i){var l,n;return t((null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)||"Something went wrong")}})),ke=(0,b.createSlice)({name:"registerPatients",initialState:{registerPatientData:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Te.pending,(e=>{e.loading=!0,e.error=null})).addCase(Te.fulfilled,((e,a)=>{e.loading=!1,e.registerPatientData=a.payload.data})).addCase(Te.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer;var Ae=t(51789),Pe=t.n(Ae);const Be=e=>{let{patientData:a,setShowPatientInfo:t}=e;if(!a)return(0,J.jsx)(r.Box,{p:3,textAlign:"center",children:"No patient data available"});const l=`${window.location.origin}/confirm-registration?mrdNo=${null===a||void 0===a?void 0:a.mrdNo}`;return(0,J.jsxs)(r.Box,{p:3,style:{backgroundColor:"#fff"},children:[(0,J.jsx)("div",{className:"text-dark header mb-3",children:"Patient Demographic Details"}),(0,J.jsx)(r.Box,{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:2,p:2,children:[{label:"MRD No",value:null===a||void 0===a?void 0:a.mrdNo},{label:"Visit Type",value:null===a||void 0===a?void 0:a.visitType},{label:"Reg Date",value:null===a||void 0===a?void 0:a.createdOn},{label:"Patient Name",value:null===a||void 0===a?void 0:a.name},{label:"Date of Birth",value:null===a||void 0===a?void 0:a.dob},{label:"Age",value:null===a||void 0===a?void 0:a.age},{label:"Email ID",value:null===a||void 0===a?void 0:a.emailId},{label:"Phone Number",value:null===a||void 0===a?void 0:a.phoneNo},{label:"Gender",value:null===a||void 0===a?void 0:a.gender},{label:"Nationality",value:null===a||void 0===a?void 0:a.nationality},{label:"National ID",value:null===a||void 0===a?void 0:a.nationalId},{label:"Visa Type",value:null===a||void 0===a?void 0:a.visaType},{label:"Info Source",value:null===a||void 0===a?void 0:a.infoSource},{label:"Address",value:null===a||void 0===a?void 0:a.address},{label:"Referral Case",value:null===a||void 0===a?void 0:a.referralCase},{label:"Phone Number (Work)",value:null===a||void 0===a?void 0:a.workPhoneno},{label:"Preferred Language",value:null===a||void 0===a?void 0:a.language},{label:"Religion",value:null===a||void 0===a?void 0:a.religion},{label:"Referred By",value:null===a||void 0===a?void 0:a.referredBy},{label:"Patient Type",value:null===a||void 0===a?void 0:a.patientType},{label:"Patient Priority",value:null===a||void 0===a?void 0:a.patientPriority},{label:"Marital Status",value:null===a||void 0===a?void 0:a.maritalStatus},{label:"Other ID Name",value:null===a||void 0===a?void 0:a.otherIdName},{label:"Other ID",value:null===a||void 0===a?void 0:a.otherId},{label:"Land Phone",value:null===a||void 0===a?void 0:a.landPhone},{label:"Occupation",value:null===a||void 0===a?void 0:a.occupation},{label:"Place",value:null===a||void 0===a?void 0:a.place},{label:"Patient Remark",value:null===a||void 0===a?void 0:a.patientRemarks}].map((e=>{let{label:a,value:t}=e;return(0,J.jsxs)(r.Box,{minWidth:"150px",display:"flex",flexDirection:"column",children:[(0,J.jsx)("div",{style:{color:"rgb(142, 150, 150)"},children:a})," ",(0,J.jsx)("div",{children:""!==t&&void 0!==t&&null!==t?t:"--"})]},a)}))}),(0,J.jsx)(r.Box,{mt:3,display:"flex",justifyContent:"end",children:(0,J.jsx)(Pe(),{value:l,style:{width:"100px",height:"100px"}})}),(0,J.jsx)(r.Box,{p:2,display:"flex",justifyContent:"end",children:(0,J.jsx)(r.Button,{variant:"contained",color:"primary",onClick:()=>t(!1),children:"Close"})})]})},Re=(0,b.createAsyncThunk)("doctor/allDoctors",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(I,e)}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),_e=(0,b.createSlice)({name:"allDoctors",initialState:{doctorData:[],docloading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Re.pending,(e=>{e.docloading=!0,e.error=null})).addCase(Re.fulfilled,((e,a)=>{e.docloading=!1,e.doctorData=a.payload.data})).addCase(Re.rejected,((e,a)=>{e.docloading=!1,e.error=a.payload}))}}).reducer,Fe=()=>{var e,a,t,n;const i=De,s=(0,o.useDispatch)(),d=(0,p.useLocation)(),c=null===(e=d.state)||void 0===e?void 0:e.bookedDetails,u=null===(a=d.state)||void 0===a?void 0:a.patientData,m=null===(t=d.state)||void 0===t?void 0:t.data,h=null===(n=d.state)||void 0===n?void 0:n.selectedBed,[x,v]=(0,l.useState)(!1),[g,b]=(0,l.useState)(),{loading:j,error:y}=(0,o.useSelector)((e=>e.regPatient)),{registerPatientData:f}=(0,o.useSelector)((e=>e.regPatient));console.log("patient data",null===f||void 0===f?void 0:f.patientDetail);const{doctorData:C}=(0,o.useSelector)((e=>null===e||void 0===e?void 0:e.allDoctor)),S=(null===C||void 0===C?void 0:C.data)||[],[N,w]=(0,l.useState)([]),[I,D]=(0,l.useState)([]);(0,l.useEffect)((()=>{s(Re())}),[]);const T=()=>{const e=new Date;return`${e.toISOString().split("T")[0]} ${e.toTimeString().split(" ")[0]}`},k={image:"",visitType:"",patientName:"",gender:"",dob:"",nationality:"",visaType:"",phoneNumber:"",infoSource:"",address:"",referralCase:"No",regDate:T(),age:"",email:"",nationalId:"",workPhoneno:"",language:"English",religion:"",referredBy:"",patientType:"Normal",patientPriority:"Normal",maritalStatus:"",otherIdName:"",otherId:"",landPhone:"",occupation:"",place:"",patientRemarks:"",speciality:"",encounterType:"No Bed + No Emergency Room",doctorName:"",paymentType:"Cash",subInsurance:"",networkType:"",insuranceCardNo:"",insuranceEffectiveFrom:"",certificateNumber:"",maxInsuranceLiability:"",maxInsuranceCopay:"",extraCardNumber:"",insuranceExpireDate:"",dependentsNo:"",insuranceClaimNumber:"",insuranceApprovalLimit:"",copayPatient:"",admissionDate:"",expectedDischargeDate:"",admissionNote:"",ward:"",roomNo:"",bedNo:"",bedRate:"",accomodationNote:""},[A,P]=(0,l.useState)((()=>{const e=localStorage.getItem("registerPatientForm");return e?JSON.parse(e):{visitType:u||h?"In Patient":"",patientName:(null===c||void 0===c?void 0:c.patientName)||(null===u||void 0===u?void 0:u.patient)||(null===m||void 0===m?void 0:m.patientName)||"",gender:(null===u||void 0===u?void 0:u.gender)||(null===m||void 0===m?void 0:m.gender)||(null===c||void 0===c?void 0:c.gender)||"",dob:(null===u||void 0===u?void 0:u.dob)||(null===m||void 0===m?void 0:m.dob)||(null===c||void 0===c?void 0:c.dob)||"",nationality:"",visaType:"",phoneNumber:(null===c||void 0===c?void 0:c.phoneNo)||(null===u||void 0===u?void 0:u.mobile)||(null===m||void 0===m?void 0:m.mobile)||"",infoSource:"",address:"",referralCase:"No",regDate:T(),age:(null===u||void 0===u?void 0:u.age)||(null===m||void 0===m?void 0:m.age)||(null===c||void 0===c?void 0:c.age)||"",email:(null===c||void 0===c?void 0:c.emailId)||(null===m||void 0===m?void 0:m.emailId)||"",nationalId:"",workPhoneno:"",language:"",religion:"",referredBy:"",patientType:"Normal",patientPriority:"Normal",maritalStatus:"",otherIdName:"",otherId:"",landPhone:"",occupation:"",place:"",patientRemarks:"",speciality:"",encounterType:"No Bed + No Emergency Room",doctorName:(null===u||void 0===u?void 0:u.doctor)||(null===m||void 0===m?void 0:m.doctorName)||"",paymentType:"Cash",subInsurance:"",networkType:"",insuranceCardNo:"",insuranceEffectiveFrom:"",certificateNumber:"",maxInsuranceLiability:"",maxInsuranceCopay:"",extraCardNumber:"",insuranceExpireDate:"",dependentsNo:"",insuranceClaimNumber:"",insuranceApprovalLimit:"",copayPatient:"",admissionDate:"",expectedDischargeDate:(null===u||void 0===u?void 0:u.exp_discharge_date)||"",admissionNote:"",ward:(null===u||void 0===u?void 0:u.ward)||(null===h||void 0===h?void 0:h.wardName)||"",roomNo:(null===h||void 0===h?void 0:h.roomNoOrName)||"",bedNo:(null===h||void 0===h?void 0:h.bedNo)||"",bedRate:(null===h||void 0===h?void 0:h.rate)||0,accomodationNote:""}}));(0,l.useEffect)((()=>{h&&P((e=>({...e,ward:h.wardName||e.ward,roomNo:h.roomNoOrName||e.roomNo,bedNo:h.bedNo||e.bedNo,bedRate:h.rate||e.bedRate})))}),[h]),(0,l.useEffect)((()=>{const e=[...new Set(S.map((e=>e.specialityName)))].map((e=>({label:e,value:e})));w(e)}),[S]),(0,l.useEffect)((()=>{if(A.speciality){const e=S.filter((e=>e.specialityName===A.speciality)).map((e=>({label:e.doctorName,value:e.doctorId})));D(e)}else D([])}),[A.speciality,S]),(0,l.useEffect)((()=>{if(null!==c&&void 0!==c&&c.specialityId){var e;const a=null===(e=S.find((e=>e.specialityId===c.specialityId)))||void 0===e?void 0:e.specialityName;a&&P((e=>({...e,speciality:a})))}}),[c,S]),(0,l.useEffect)((()=>{if(null!==c&&void 0!==c&&c.doctorId&&I.length>0){const e=I.find((e=>e.value===c.doctorId));e&&P((a=>({...a,doctorId:c.doctorId,doctorName:e.label})))}}),[I,c]);const B=(e,a)=>{P((t=>{const l={...t,[e]:a};return localStorage.setItem("registerPatientForm",JSON.stringify(l)),l}))};return(0,l.useEffect)((()=>{null!==f&&void 0!==f&&f.patientDetail?(b(f.patientDetail),console.log("Updated Patient Data:",f.patientDetail)):y&&ne("Something went wrong!!","error")}),[f,y]),(0,J.jsx)(r.Box,{paddingBottom:"20%",children:x?(0,J.jsx)(Be,{patientData:g,setShowPatientInfo:v}):(0,J.jsxs)("form",{children:[(0,J.jsxs)(r.Box,{p:1,width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Patient Demographic Details"})}),(0,J.jsxs)(r.Box,{className:"form-details-section",children:[(0,J.jsx)(Ie,{type:"file",onChange:e=>{console.log("Selected file:",e)},inputProps:{accept:"image/*"}}),(0,J.jsx)(Ie,{label:"Visit Type",required:!0,type:"select",options:i.visitOptions,value:A.visitType,onChange:e=>B("visitType",e)}),(0,J.jsx)(Ie,{label:"Reg Date",type:"date",required:!0,value:A.regDate,onChange:e=>B("regDate",e)}),(0,J.jsx)(Ie,{label:"Patient Name",required:!0,value:A.patientName,onChange:e=>B("patientName",e)}),(0,J.jsx)(Ie,{label:"Date of Birth",required:!0,type:"date",value:A.dob,onChange:e=>B("dob",e),setDependentValue:e=>B("age",e)}),(0,J.jsx)(Ie,{label:"Age",required:!0,value:A.age,onChange:e=>B("age",e)}),(0,J.jsx)(Ie,{label:"Gender",required:!0,type:"select",options:i.genderOpton,value:A.gender,onChange:e=>B("gender",e)}),(0,J.jsx)(Ie,{label:"Email ID",required:!0,value:A.email,onChange:e=>B("email",e)}),(0,J.jsx)(Ie,{label:"Phone Number",required:!0,value:A.phoneNumber,onChange:e=>B("phoneNumber",e)}),(0,J.jsx)(Ie,{label:"Nationality",required:!0,type:"select",options:i.nationalityOptions,value:A.nationality,onChange:e=>B("nationality",e)}),(0,J.jsx)(Ie,{label:"National Id",required:!0,value:A.nationalId,onChange:e=>B("nationalId",e)}),(0,J.jsx)(Ie,{label:"Address",required:!0,value:A.address,onChange:e=>B("address",e)}),(0,J.jsx)(Ie,{label:"Patient Priority",required:!0,type:"select",options:i.patientPriorityOptions,value:A.patientPriority,onChange:e=>B("patientPriority",e)}),(0,J.jsx)(Ie,{label:"Occupation",required:!0,type:"select",options:i.occupationOptions,value:A.occupation,onChange:e=>B("occupation",e)}),(0,J.jsx)(Ie,{label:"Marital Status",required:!0,type:"select",options:i.maritalStatusOptions,value:A.maritalStatus,onChange:e=>B("maritalStatus",e)}),(0,J.jsx)(Ie,{label:"Referral Case",required:!0,type:"select",options:i.referralOptions,value:A.referralCase,onChange:e=>B("referralCase",e)}),(0,J.jsx)(Ie,{label:"Info Source",type:"select",options:i.infoSourceOptions,value:A.infoSource,onChange:e=>B("infoSource",e)}),(0,J.jsx)(Ie,{label:"Visa Type",type:"select",options:i.visaTypeOptions,value:A.visaType,onChange:e=>B("visaType",e)}),(0,J.jsx)(Ie,{label:"Phone Number (Work)",value:A.workPhoneno,onChange:e=>B("workPhoneno",e)}),(0,J.jsx)(Ie,{label:"Preferred Language",value:A.language,onChange:e=>B("language",e)}),(0,J.jsx)(Ie,{label:"Religion",type:"select",options:i.religionOptions,value:A.religion,onChange:e=>B("religion",e)}),(0,J.jsx)(Ie,{label:"Referred By",value:A.referredBy,onChange:e=>B("referredBy",e)}),(0,J.jsx)(Ie,{label:"Patient Type",type:"select",options:i.patientTypeOptions,value:A.patientType,onChange:e=>B("patientType",e)}),(0,J.jsx)(Ie,{label:"Other ID Name",type:"select",options:i.otherIdOptions,value:A.otherIdName,onChange:e=>B("otherIdName",e)}),(0,J.jsx)(Ie,{label:"Other ID No",value:A.otherId,onChange:e=>B("otherId",e)}),(0,J.jsx)(Ie,{label:"Land Phone",value:A.landPhone,onChange:e=>B("landPhone",e)}),(0,J.jsx)(Ie,{label:"Place",value:A.place,onChange:e=>B("place",e)}),(0,J.jsx)(Ie,{label:"Patient Remark",value:A.patientRemarks,onChange:e=>B("patientRemarks",e)})]})]}),(0,J.jsxs)(r.Box,{p:1,width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Consultation Details"})}),(0,J.jsxs)(r.Box,{className:"form-details-section",children:[(0,J.jsx)(Ie,{label:"Speciality",required:!0,type:"select",options:N,value:A.speciality,onChange:e=>B("speciality",e)}),(0,J.jsx)(Ie,{label:"Doctor Name",required:!0,type:"select",options:I,value:A.doctorName,onChange:e=>B("doctorName",e)}),"In Patient"===A.visitType?"":(0,J.jsx)(Ie,{label:"Encounter Type",required:!0,type:"select",options:i.encounterTypeOptions,value:A.encounterType,onChange:e=>B("encounterType",e)})]})]}),"In Patient"===A.visitType&&(0,J.jsxs)(r.Box,{p:1,width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Admission Details"})}),(0,J.jsxs)(r.Box,{className:"form-details-section mb-4",children:[(0,J.jsx)(Ie,{label:"Admission Date & Time",type:"datetime-local",value:A.admissionDate,onChange:e=>B("admissionDate",e)}),(0,J.jsx)(Ie,{label:"Expected Discharge Date & Time",type:"datetime-local",value:A.expectedDischargeDate,onChange:e=>B("expectedDischargeDate",e)}),(0,J.jsx)(Ie,{label:"Encounter Type",type:"select",value:A.encounterType,options:i.ipEncounterTypeOptions,onChange:e=>B("encounterType",e)}),(0,J.jsx)(Ie,{label:"Notes",value:A.admissionNote,onChange:e=>B("admissionNote",e)})]})]}),"In Patient"===A.visitType&&(0,J.jsxs)(r.Box,{p:1,width:"100%",children:[(0,J.jsxs)("div",{className:"d-flex ",style:{justifyContent:"space-between"},children:[(0,J.jsx)("p",{className:"text-dark header",children:"Accomodation details"}),(0,J.jsx)(p.Link,{to:"/secure/bedandward?tab=bed-occupancy",children:"Select Bed and Ward"})]}),(0,J.jsxs)(r.Box,{className:"form-details-section mb-4",children:[(0,J.jsx)(Ie,{label:"Ward",value:A.ward,onChange:e=>B("ward",e)}),(0,J.jsx)(Ie,{label:"Room No",value:A.roomNo,onChange:e=>B("roomNo",e)}),(0,J.jsx)(Ie,{label:"Bed No",value:A.bedNo,onChange:e=>B("bedNo",e)}),(0,J.jsx)(Ie,{label:"Bed Rate",value:A.bedRate,onChange:e=>B("bedRate",e)}),(0,J.jsx)(Ie,{label:"Notes",value:A.accomodationNote,onChange:e=>B("accomodationNote",e)})]})]}),(0,J.jsxs)(r.Box,{p:1,width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Payment Details"})}),(0,J.jsx)(r.Box,{className:"form-details-section mb-4",children:(0,J.jsx)(Ie,{label:"Payment Type",required:!0,type:"select",options:i.paymentOptions,value:A.paymentType,onChange:e=>B("paymentType",e)})}),"Insurance"===A.paymentType&&(0,J.jsxs)(r.Box,{className:"form-details-section",children:[(0,J.jsx)(Ie,{label:"Sub Insurance",type:"select",value:A.subInsurance,onChange:e=>B("subInsurance",e)}),(0,J.jsx)(Ie,{label:"Network Type",value:A.networkType,onChange:e=>B("networkType",e)}),(0,J.jsx)(Ie,{label:"Insurance Card No",required:!0,value:A.insuranceCardNo,onChange:e=>B("insuranceCardNo",e)}),(0,J.jsx)(Ie,{label:"Insurance Effective From",type:"date",value:A.insuranceEffectiveFrom,onChange:e=>B("insuranceEffectiveFrom",e)}),(0,J.jsx)(Ie,{label:"Certificate No",value:A.certificateNumber,onChange:e=>B("certificateNumber",e)}),(0,J.jsx)(Ie,{label:"Max Insurance Liability",value:A.maxInsuranceLiability,onChange:e=>B("maxInsuranceLiability",e)}),(0,J.jsx)(Ie,{label:"Max Insurance Copay",value:A.maxInsuranceCopay,onChange:e=>B("maxInsuranceCopay",e)}),(0,J.jsx)(Ie,{label:"Extra Card No",value:A.extraCardNumber,onChange:e=>B("extraCardNumber",e)}),(0,J.jsx)(Ie,{label:"Insurance Expiry Date",required:!0,type:"date",value:A.insuranceExpireDate,onChange:e=>B("insuranceExpireDate",e)}),(0,J.jsx)(Ie,{label:"dependentsNo No",value:A.dependentsNo,onChange:e=>B("dependentsNo",e)}),(0,J.jsx)(Ie,{label:"Insurance Claim No",value:A.insuranceClaimNumber,onChange:e=>B("insuranceClaimNumber",e)}),(0,J.jsx)(Ie,{label:"Insurance Approval Limit",value:A.insuranceApprovalLimit,onChange:e=>B("insuranceApprovalLimit",e)}),(0,J.jsx)(Ie,{label:"Co Pay Patient",value:A.copayPatient,onChange:e=>B("copayPatient",e)})]})]}),(0,J.jsx)(r.Box,{display:"flex",padding:"0.5em",width:"100%",justifyContent:"flex-end",children:(0,J.jsx)(Se.Button,{onClick:()=>{var e,a;const t=["visitType","patientName","dob","nationality","address","referralCase","regDate","age","email","nationalId","patientPriority","gender","maritalStatus","occupation","speciality","doctorName","paymentType","encounterType"].filter((e=>!A[e]));if(t.length>0)return void ne((0,J.jsxs)("div",{children:[(0,J.jsx)("p",{children:"Please fill all required fields:"}),(0,J.jsx)("ul",{children:t.map(((e,a)=>(0,J.jsx)("li",{children:e},a)))})]}),"error");const l=null===(e=S.find((e=>e.specialityName===A.speciality)))||void 0===e?void 0:e.specialityId,n=null===(a=I.find((e=>e.label===A.doctorName)))||void 0===a?void 0:a.value,{regDate:i,ward:o,roomNo:r,bedNo:d,bedRate:c,speciality:u,doctorName:p,...m}=A,x={...m,specialityId:l||"",doctorId:n||"",bedId:(null===h||void 0===h?void 0:h.bedId)||""};s(Te(x)).then((()=>{localStorage.removeItem("registerPatientForm"),P((e=>({...k,regDate:e.regDate,ward:e.ward,roomNo:e.roomNo,bedNo:e.bedNo,bedRate:e.bedRate,speciality:e.speciality,doctorName:e.doctorName}))),v(!0)}))},disabled:j,className:"form-btn",type:"submit",children:j?"Registering...":"Register New Patient"})})]})})},Ee=(0,b.createAsyncThunk)("patient/emergencyPatients",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.post(E,e)}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),Le=(0,b.createSlice)({name:"emergencyPatients",initialState:{emergencyPatientData:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Ee.pending,(e=>{e.loading=!0,e.error=null})).addCase(Ee.fulfilled,((e,a)=>{e.loading=!1,e.emergencyPatientData=a.payload.data})).addCase(Ee.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,Me=()=>{const e=(0,o.useDispatch)(),a=De,[t,n]=(0,l.useState)({patientName:"",dob:"",nationality:"",visaType:"",phoneNumber:"",infoSource:"",regDate:(()=>{const e=new Date;return`${e.toISOString().split("T")[0]} ${e.toLocaleTimeString([],{hour12:!1})}`})(),age:"",email:"",nationalId:"",language:"",landPhone:"",speciality:"",encounterType:"",doctorName:""}),i=(e,a)=>{n((t=>({...t,[e]:a})))},[s,d]=(0,l.useState)([]),[c,u]=(0,l.useState)([]),{doctorData:p}=(0,o.useSelector)((e=>null===e||void 0===e?void 0:e.allDoctor)),m=(null===p||void 0===p?void 0:p.data)||[];(0,l.useEffect)((()=>{const e=[...new Set(m.map((e=>e.specialityName)))].map((e=>({label:e,value:e})));d(e)}),[m]),(0,l.useEffect)((()=>{if(t.speciality){const e=m.filter((e=>e.specialityName===t.speciality)).map((e=>({label:e.doctorName,value:e.doctorId})));u(e)}else u([])}),[t.speciality,m]);return(0,J.jsxs)(r.Box,{paddingBottom:"20%",children:[(0,J.jsxs)(r.Box,{children:[(0,J.jsxs)(r.Box,{padding:"1em",width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Patient Demographic Details"})}),(0,J.jsxs)(r.Box,{className:"form-details-section",children:[(0,J.jsx)(Ie,{label:"Reg Date",type:"date",required:!0,value:t.regDate,onChange:e=>i("regDate",e)}),(0,J.jsx)(Ie,{label:"Patient Name",required:!0,value:t.patientName,onChange:e=>i("patientName",e)}),(0,J.jsx)(Ie,{label:"Date of Birth",required:!0,type:"date",value:t.dob,onChange:e=>i("dob",e),setDependentValue:e=>i("age",e)}),(0,J.jsx)(Ie,{label:"Age",required:!0,value:t.age,onChange:e=>i("age",e)}),(0,J.jsx)(Ie,{label:"Phone Number",required:!0,value:t.phoneNumber,onChange:e=>i("phoneNumber",e)}),(0,J.jsx)(Ie,{label:"Email ID",required:!0,value:t.email,onChange:e=>i("email",e)}),(0,J.jsx)(Ie,{label:"Nationality",required:!0,type:"select",options:a.nationalityOptions,value:t.nationality,onChange:e=>i("nationality",e)}),(0,J.jsx)(Ie,{label:"National Id",value:t.nationalId,onChange:e=>i("nationalId",e)}),(0,J.jsx)(Ie,{label:"Info Source",type:"select",options:a.infoSourceOptions,value:t.infoSource,onChange:e=>i("infoSource",e)}),(0,J.jsx)(Ie,{label:"Visa Type",type:"select",options:a.visaTypeOptions,value:t.visaType,onChange:e=>i("visaType",e)}),(0,J.jsx)(Ie,{label:"Preferred Language",value:t.language,onChange:e=>i("language",e)}),(0,J.jsx)(Ie,{label:"Land Phone",value:t.landPhone,onChange:e=>i("landPhone",e)})]})]}),(0,J.jsxs)(r.Box,{padding:"1em",width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Consultation Details"})}),(0,J.jsxs)(r.Box,{className:"form-details-section",children:[(0,J.jsx)(Ie,{label:"Speciality",required:!0,type:"select",options:s,value:t.speciality,onChange:e=>i("speciality",e)}),(0,J.jsx)(Ie,{label:"Doctor Name",required:!0,type:"select",options:c,value:t.doctorName,onChange:e=>i("doctorName",e)}),(0,J.jsx)(Ie,{label:"Encounter Type",required:!0,type:"select",options:a.encounterTypeOptions,value:t.encounterType,onChange:e=>i("encounterType",e)})]})]})]}),(0,J.jsx)(r.Box,{display:"flex",padding:"0.5em",width:"100%",justifyContent:"flex-end",children:(0,J.jsx)(Se.Button,{onClick:()=>{e(Ee(t))},className:"form-btn",children:"Register Emergency Patient"})})]})},Oe=(0,b.createAsyncThunk)("patient/searchPatients",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(R,{params:e})}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),ze=(0,b.createSlice)({name:"searchPatients",initialState:{searchPatientData:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Oe.pending,(e=>{e.loading=!0,e.error=null})).addCase(Oe.fulfilled,((e,a)=>{e.loading=!1,e.searchPatientData=a.payload.data})).addCase(Oe.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,We=(0,b.createAsyncThunk)("patient/revisitPatients",(async(e,a)=>{let{credentials:t,patientId:l}=e,{rejectWithValue:n}=a;try{return(await C.put(`${F}/${l}`,t)).data}catch(r){var i,o;return n((null===(i=r.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Something went wrong!")}})),Ye=(0,b.createSlice)({name:"revisitPatients",initialState:{data:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(We.pending,(e=>{e.loading=!0,e.error=null})).addCase(We.fulfilled,((e,a)=>{e.loading=!1,e.data=a.payload.data})).addCase(We.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,Ve=()=>{var e,a,t;const n=(0,p.useLocation)(),i=null===(e=n.state)||void 0===e?void 0:e.patientData,s=null===(a=n.state)||void 0===a?void 0:a.data,d=null===(t=n.state)||void 0===t?void 0:t.bookedDetails,[c,u]=(0,l.useState)(""),[m,h]=(0,l.useState)(null),[x,v]=(0,l.useState)(!1),[g,b]=(0,l.useState)(),j=De,y=(0,o.useDispatch)(),{searchPatientData:f}=(0,o.useSelector)((e=>e.searchPatient)),{data:C,loading:S,error:N}=(0,o.useSelector)((e=>null===e||void 0===e?void 0:e.revisit)),w=null===m||void 0===m?void 0:m.patientId,[I,D]=(0,l.useState)([]),[T,k]=(0,l.useState)([]),{doctorData:A}=(0,o.useSelector)((e=>null===e||void 0===e?void 0:e.allDoctor)),P=(null===A||void 0===A?void 0:A.data)||[],B=e=>{const a=e.target.value;y(Oe({searchKey:a})),u(a)},[R,_]=(0,l.useState)({mrdNumber:(null===i||void 0===i?void 0:i.mr_no)||(null===s||void 0===s?void 0:s.mrdNo)||(null===d||void 0===d?void 0:d.mrdNo)||"",dob:(null===i||void 0===i?void 0:i.dob)||(null===s||void 0===s?void 0:s.dob)||(null===d||void 0===d?void 0:d.dob)||"",gender:(null===i||void 0===i?void 0:i.gender)||(null===s||void 0===s?void 0:s.gender)||(null===d||void 0===d?void 0:d.gender)||"",phoneNumber:(null===i||void 0===i?void 0:i.mobile)||(null===s||void 0===s?void 0:s.mobile)||(null===d||void 0===d?void 0:d.phoneNo)||"",patientName:(null===i||void 0===i?void 0:i.patient)||(null===s||void 0===s?void 0:s.patientName)||(null===d||void 0===d?void 0:d.patientName)||"",age:(null===i||void 0===i?void 0:i.age)||(null===s||void 0===s?void 0:s.age)||(null===d||void 0===d?void 0:d.age)||"",nationality:(null===i||void 0===i?void 0:i.nationality)||(null===s||void 0===s?void 0:s.nationality)||"",nationalId:(null===i||void 0===i?void 0:i.nationalId)||(null===s||void 0===s?void 0:s.nationalId)||"",visaType:(null===i||void 0===i?void 0:i.visaType)||(null===s||void 0===s?void 0:s.visaType)||"",speciality:"",encounterType:"",doctorName:"",paymentType:"",subInsurance:"",networkType:"",insuranceCardNo:"",insuranceEffectiveFrom:"",certificateNumber:"",maxInsuranceLiability:"",maxInsuranceCopay:"",extraCardNumber:"",insuranceExpireDate:"",dependentsNo:"",insuranceClaimNumber:"",insuranceApprovalLimit:"",copayPatient:""});(0,l.useEffect)((()=>{const e=[...new Set(P.map((e=>e.specialityName)))].map((e=>({label:e,value:e})));D(e)}),[P]),(0,l.useEffect)((()=>{if(R.speciality){const e=P.filter((e=>e.specialityName===R.speciality)).map((e=>({label:e.doctorName,value:e.doctorId})));k(e)}else k([])}),[R.speciality,P]),(0,l.useEffect)((()=>{if(null!==d&&void 0!==d&&d.specialityId){var e;const a=null===(e=P.find((e=>e.specialityId===d.specialityId)))||void 0===e?void 0:e.specialityName;a&&_((e=>({...e,speciality:a})))}}),[d,P]),(0,l.useEffect)((()=>{if(null!==d&&void 0!==d&&d.doctorId&&T.length>0){const e=T.find((e=>e.value===d.doctorId));e&&_((a=>({...a,doctorId:d.doctorId,doctorName:e.label})))}}),[T,d]),(0,l.useEffect)((()=>{m&&_((e=>({...e,mrdNumber:(null===m||void 0===m?void 0:m.mrdNo)||"",dob:(null===m||void 0===m?void 0:m.dob)||"",gender:(null===m||void 0===m?void 0:m.gender)||"",phoneNumber:(null===m||void 0===m?void 0:m.phoneNo)||"",patientName:(null===m||void 0===m?void 0:m.name)||"",age:(null===m||void 0===m?void 0:m.age)||"",nationality:(null===m||void 0===m?void 0:m.nationality)||"",nationalId:(null===m||void 0===m?void 0:m.nationalId)||"",visaType:(null===m||void 0===m?void 0:m.visaType)||""})))}),[m]);const F=(e,a)=>{_((t=>({...t,[e]:a})))};return(0,l.useEffect)((()=>{null!==C&&void 0!==C&&C.revisitPatient?(b(C.revisitPatient),console.log("Updated Patient Data:",C.revisitPatient)):N&&ne("Something went wrong!!","error")}),[C,N]),(0,J.jsx)(r.Box,{paddingBottom:"20%",children:x?(0,J.jsx)(Be,{patientData:g,setShowPatientInfo:v}):(0,J.jsxs)("div",{children:[(0,J.jsx)(r.Box,{display:"flex",justifyContent:"start",my:1,ml:1,children:(0,J.jsx)(r.Autocomplete,{freeSolo:!0,options:(null===f||void 0===f?void 0:f.data)||[],getOptionLabel:e=>e.name||"",renderInput:e=>(0,J.jsx)(r.TextField,{...e,label:"Search Patients",variant:"outlined",value:c,onChange:B,placeholder:"Type to search...",size:"small",sx:{width:300}}),onChange:(e,a)=>{h(a)}})}),(0,J.jsxs)(r.Box,{children:[(0,J.jsxs)(r.Box,{p:1,width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Patient Demographic Details"})}),(0,J.jsxs)(r.Box,{className:"form-details-section",children:[(0,J.jsx)(Ie,{label:"MRD Number",value:R.mrdNumber,onChange:e=>F("mrdNumber",e)}),(0,J.jsx)(Ie,{label:"Patient Name",required:!0,value:R.patientName,onChange:e=>F("patientName",e)}),(0,J.jsx)(Ie,{label:"Gender",required:!0,type:"select",options:j.genderOpton,value:R.gender,onChange:e=>F("gender",e)}),(0,J.jsx)(Ie,{label:"Date of Birth",required:!0,type:"date",value:R.dob,onChange:e=>F("dob",e),setDependentValue:e=>F("age",e)}),(0,J.jsx)(Ie,{label:"Age",required:!0,value:R.age,onChange:e=>F("age",e)}),(0,J.jsx)(Ie,{label:"Phone Number",required:!0,value:R.phoneNumber,onChange:e=>F("phoneNumber",e)}),(0,J.jsx)(Ie,{label:"Nationality",required:!0,type:"select",options:j.nationalityOptions,value:R.nationality,onChange:e=>F("nationality",e)}),(0,J.jsx)(Ie,{label:"National Id",value:R.nationalId,onChange:e=>F("nationalId",e)}),(0,J.jsx)(Ie,{label:"Visa Type",type:"select",options:j.visaTypeOptions,value:R.visaType,onChange:e=>F("visaType",e)})]})]}),(0,J.jsxs)(r.Box,{p:1,width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Consultation Details"})}),(0,J.jsxs)(r.Box,{className:"form-details-section",children:[(0,J.jsx)(Ie,{label:"Speciality",required:!0,type:"select",options:I,value:R.speciality,onChange:e=>F("speciality",e)}),(0,J.jsx)(Ie,{label:"Doctor Name",required:!0,type:"select",options:T,value:R.doctorName,onChange:e=>F("doctorName",e)}),(0,J.jsx)(Ie,{label:"Encounter Type",required:!0,type:"select",options:j.encounterTypeOptions,value:R.encounterType,onChange:e=>F("encounterType",e)})]})]}),(0,J.jsxs)(r.Box,{p:1,width:"100%",children:[(0,J.jsx)("div",{children:(0,J.jsx)("p",{className:"text-dark header",children:"Payment Details"})}),(0,J.jsx)(r.Box,{className:"form-details-section",children:(0,J.jsx)(Ie,{label:"Payment Type",required:!0,type:"select",options:j.paymentOptions,value:R.paymentType,onChange:e=>F("paymentType",e)})}),"Insurance"===R.paymentType&&(0,J.jsxs)(r.Box,{className:"form-details-section",children:[(0,J.jsx)(Ie,{label:"Sub Insurance",type:"select",value:R.subInsurance,onChange:e=>F("subInsurance",e)}),(0,J.jsx)(Ie,{label:"Network Type",value:R.networkType,onChange:e=>F("networkType",e)}),(0,J.jsx)(Ie,{label:"Insurance Card No",required:!0,value:R.insuranceCardNo,onChange:e=>F("insuranceCardNo",e)}),(0,J.jsx)(Ie,{label:"Insurance Effective From",type:"date",value:R.insuranceEffectiveFrom,onChange:e=>F("insuranceEffectiveFrom",e)}),(0,J.jsx)(Ie,{label:"Certificate No",value:R.certificateNumber,onChange:e=>F("certificateNumber",e)}),(0,J.jsx)(Ie,{label:"Max Insurance Liability",value:R.maxInsuranceLiability,onChange:e=>F("maxInsuranceLiability",e)}),(0,J.jsx)(Ie,{label:"Max Insurance Copay",value:R.maxInsuranceCopay,onChange:e=>F("maxInsuranceCopay",e)}),(0,J.jsx)(Ie,{label:"Extra Card No",value:R.extraCardNumber,onChange:e=>F("extraCardNumber",e)}),(0,J.jsx)(Ie,{label:"Insurance Expiry Date",required:!0,type:"date",value:R.insuranceExpireDate,onChange:e=>F("insuranceExpireDate",e)}),(0,J.jsx)(Ie,{label:"Dependents No",value:R.dependentsNo,onChange:e=>F("dependentsNo",e)}),(0,J.jsx)(Ie,{label:"Insurance Claim No",value:R.insuranceClaimNumber,onChange:e=>F("insuranceClaimNumber",e)}),(0,J.jsx)(Ie,{label:"Insurance Approval Limit",value:R.insuranceApprovalLimit,onChange:e=>F("insuranceApprovalLimit",e)}),(0,J.jsx)(Ie,{label:"Co Pay Patient",value:R.copayPatient,onChange:e=>F("copayPatient",e)})]})]})]}),(0,J.jsx)(r.Box,{display:"flex",padding:"0.5em",width:"100%",justifyContent:"flex-end",children:(0,J.jsx)(Se.Button,{onClick:()=>{const e=["patientName","dob","nationality","age","nationalId","gender","speciality","doctorName","paymentType","encounterType","phoneNumber"].filter((e=>!R[e]));e.length>0?ne((0,J.jsxs)("div",{children:[(0,J.jsx)("p",{children:"Please fill all required fields:"}),(0,J.jsx)("ul",{children:e.map(((e,a)=>(0,J.jsx)("li",{children:e},a)))})]}),"error"):y(We({credentials:R,patientId:w})).then((()=>{_((e=>({...e,mrdNumber:"",dob:"",gender:"",phoneNumber:"",patientName:"",age:"",nationality:"",nationalId:"",visaType:"",speciality:"",encounterType:"",doctorName:"",paymentType:"",subInsurance:"",networkType:"",insuranceCardNo:"",insuranceEffectiveFrom:"",certificateNumber:"",maxInsuranceLiability:"",maxInsuranceCopay:"",extraCardNumber:"",insuranceExpireDate:"",dependentsNo:"",insuranceClaimNumber:"",insuranceApprovalLimit:"",copayPatient:""}))),v(!0)}))},className:"form-btn",children:S?"Registering...":" Register Revisit Patient"})})]})})};var He=t(44503),qe=t.n(He);const Ge=(0,b.createAsyncThunk)("patient/patientList",(async(e,a)=>{let{rejectWithValue:t}=a;try{return(await C.get(W)).data}catch(i){var l,n;return t((null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)||"Something went wrong")}})),$e=(0,b.createSlice)({name:"patientList",initialState:{data:null,loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Ge.pending,(e=>{e.loading=!0,e.error=null})).addCase(Ge.fulfilled,((e,a)=>{e.loading=!1,e.data=a.payload.data})).addCase(Ge.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,{Option:Ue}=je.Select,Ke=()=>{const e=(0,o.useDispatch)(),{data:a}=(0,o.useSelector)((e=>e.todayPatientList)),[t,n]=(0,l.useState)({}),[i,r]=(0,l.useState)("--All--");console.log("data",a);(0,l.useEffect)((()=>{e(Ge())}),[]);const[s,d]=(0,l.useState)({current:1,pageSize:10}),c=[{title:"S.No",dataIndex:"sno",key:"sno",render:(e,a,t)=>(s.current-1)*s.pageSize+t+1},{title:"Registration Date",dataIndex:"registrationDate",key:"registrationDate",render:e=>e?qe()(e).format("YYYY-MM-DD"):"--"},{title:"MRD Number",dataIndex:"mrdNo",key:"mrdNo",filterDropdown:e=>{let{setSelectedKeys:a,selectedKeys:t,confirm:l}=e;return(0,J.jsx)(je.Input,{value:t[0],onChange:e=>a(e.target.value?[e.target.value]:[]),onPressEnter:()=>l(),onBlur:()=>l(),placeholder:"Search MRD Number"})},onFilter:(e,a)=>a.mr_number.toString().toLowerCase().includes(e.toLowerCase())},{title:"Patient Name",dataIndex:"patientName",key:"patientName",filterDropdown:e=>{let{setSelectedKeys:a,selectedKeys:t,confirm:l}=e;return(0,J.jsx)(je.Input,{value:t[0],onChange:e=>a(e.target.value?[e.target.value]:[]),onPressEnter:()=>l(),onBlur:()=>l(),placeholder:"Search Patient Name"})},onFilter:(e,a)=>a.patient_name.toLowerCase().includes(e.toLowerCase())},{title:"DOB",dataIndex:"dob",key:"dob",render:e=>e?qe()(e).format("YYYY-MM-DD"):"--"},{title:"Gender",dataIndex:"gender",key:"gender"},{title:"Nationality",dataIndex:"nationality",key:"nationality"},{title:"Status",dataIndex:"status",key:"status",filterDropdown:e=>{let{setSelectedKeys:a,selectedKeys:t,confirm:l}=e;return(0,J.jsxs)(je.Select,{value:t[0],onChange:e=>{a(e?[e]:[]),l()},style:{width:"100%"},children:[(0,J.jsx)(Ue,{value:"--All--",children:"--All--"}),(0,J.jsx)(Ue,{value:"Active",children:"Active"}),(0,J.jsx)(Ue,{value:"Inactive",children:"Inactive"})]})},onFilter:(e,a)=>a.status===e},{title:"Options",dataIndex:"actions",key:"actions",render:(e,a)=>(0,J.jsx)("a",{href:"#",children:"Edit"})}];return(0,J.jsx)("div",{children:(0,J.jsx)(je.Table,{className:"table-container",columns:c,dataSource:a||[],rowKey:(e,a)=>a,pagination:{current:s.current,pageSize:s.pageSize,onChange:(e,a)=>d({current:e,pageSize:a})}})})},Je=()=>{const[e]=(0,p.useSearchParams)(),a=e.get("tab")||"register_patient",[t,n]=(0,l.useState)(a);return(0,l.useEffect)((()=>{n(a)}),[a]),(0,J.jsxs)(be,{style:{padding:"20px"},children:[(0,J.jsx)(r.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,J.jsx)(Ce,{tabsList:[{name:"Register Patient",value:"register_patient",icon:""},{name:"Revisit",value:"revist_registration",icon:""},{name:"Emergency Registration",value:"emergency_registration",icon:""},{name:"Patient List",value:"patient_list",icon:""}],defaultTab:a,setActiveTab:n})}),(0,J.jsxs)(r.Box,{children:["register_patient"===t&&(0,J.jsx)(Fe,{}),"revist_registration"===t&&(0,J.jsx)(Ve,{}),"emergency_registration"===t&&(0,J.jsx)(Me,{}),"patient_list"===t&&(0,J.jsx)(Ke,{})]})]})};var Qe=t(14095),Xe=t(73284),Ze=t(91875),ea=t(20587),aa=t(6601);const ta=t.p+"static/media/doc2.0bc76528581e68cf5f86.jpg";var la=t(96534),na=t(78614),ia=t(15892),oa=t(30431),ra=t.n(oa),sa=t(16700),da=t(9294);const ca=e=>{let{cardTitle:a,searchByPatientName:t,searchByStatus:n}=e;const[i,o]=(0,l.useState)(ra()()),[s,d]=(0,l.useState)(""),[c,u]=(0,l.useState)(null),[p,m]=(0,l.useState)([]);return(0,J.jsx)("div",{children:"Revenue"===a?(0,J.jsxs)(r.Box,{sx:{display:"flex",alignItems:"center",mt:2,marginBottom:5},children:[(0,J.jsx)(r.Typography,{variant:"h6",align:"center",sx:{flexGrow:1,display:"flex",ml:"250px"},children:"Transaction Details"})," ","   ",(0,J.jsx)(la.$,{dateAdapter:na.R,children:(0,J.jsx)(ia.T,{label:"Date",inputFormat:"MM/DD/YYYY",value:i,onChange:e=>{o(e)},renderInput:e=>(0,J.jsx)(r.TextField,{...e})})})]}):""===a?"":(0,J.jsxs)(r.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[(0,J.jsxs)(r.Box,{sx:{display:"flex",alignItems:"center",flexGrow:1},children:[(0,J.jsx)(r.Typography,{variant:"h6",sx:{flexGrow:1,ml:2},children:a}),(0,J.jsx)(r.TextField,{size:"small",variant:"outlined",placeholder:"Patient Name/ MRD No",value:s,onChange:e=>{d(e.target.value),e.target.value?t(e.target.value):t("")},InputProps:{startAdornment:(0,J.jsx)(r.InputAdornment,{position:"start",children:(0,J.jsx)(sa.A,{})}),endAdornment:(0,J.jsx)(r.InputAdornment,{position:"end",children:(0,J.jsx)(r.IconButton,{onClick:()=>{d(""),t("")},"aria-label":"clear search",edge:"end",size:"small",sx:{visibility:s?"visible":"hidden"},children:(0,J.jsx)(Ne.A,{})})})}})]}),(0,J.jsxs)(r.Box,{sx:{display:"flex",alignItems:"center",ml:2,mr:2},children:[(0,J.jsx)(r.Button,{variant:"contained",color:p.length>0?"success":"primary",startIcon:(0,J.jsx)(U.FilterList,{}),onClick:e=>{u(e.currentTarget)},children:p.length>0?`Filter Applied ${p.length}`:"Filter"}),(0,J.jsx)(r.Menu,{anchorEl:c,open:Boolean(c),onClose:()=>{u(null)},PaperProps:{style:{maxHeight:216,width:"fit-content"}},children:(0,J.jsxs)(r.Stack,{direction:"row",spacing:0,p:1,flexWrap:"wrap",children:[[{label:"New Patient",color:"#ADD8E6"},{label:"Old Patient",color:"#d9f2d0"},{label:"Revisit",color:"#fae2d5"},{label:"Walking",color:"#cce7ff"}].map((e=>(0,J.jsx)("div",{children:(0,J.jsx)(r.MenuItem,{onClick:()=>{return n(a=e),void m((e=>e.includes(a.label)?e.filter((e=>e!==a.label)):[...e,a.label]));var a},style:{padding:"8px 16px",cursor:"pointer",backgroundColor:p.includes(e.label)?e.color:"transparent",color:p.includes(e.label)?"black":"inherit"},children:e.label},e.label)}))),(0,J.jsx)(r.MenuItem,{children:(0,J.jsx)(r.IconButton,{color:"primary",onClick:()=>{m([]),u(null),n("")},children:(0,J.jsx)(da.A,{})})})]})})]})]})})};var ua=t(22208);const pa=(0,t(26855).Ay)(ua.DataGrid)((e=>{let{theme:a}=e;return{".MuiDataGrid-columnHeaders":{textAlign:"center"},".MuiDataGrid-groupHeader":{textAlign:"center"},"& .MuiDataGrid-scrollbar--horizontal":{height:"8px !important",backgroundColor:"#f0f0f0",borderRadius:"4px"},"& .MuiDataGrid-scrollbar--horizontal .MuiDataGrid-scrollbarContent":{backgroundColor:"#888",borderRadius:"4px"},"& .MuiDataGrid-scrollbar--horizontal .MuiDataGrid-scrollbarContent:hover":{backgroundColor:"#555"}}}));function ma(e){let{dashboardList:a}=e;const[t,l]=n().useState(!1),[i,o]=n().useState(null),s=()=>{l(!1)},d=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("en-GB")},c=e=>e||"-",u=[{field:"sno",headerName:"S. No",width:90},{field:"date",headerName:"Date",width:150,valueGetter:e=>d(e.row.date)},{field:"regNo",headerName:"Reg No",width:150,valueGetter:e=>c(e.row.regNo)},{field:"patientName",headerName:"Patient Name",width:200,valueGetter:e=>c(e.row.patientName)},{field:"view",headerName:"Revenue Details",width:150,renderCell:e=>(0,J.jsx)(r.Button,{variant:"contained",color:"primary",onClick:()=>{return a=e.row,o(a),void l(!0);var a},children:"View"})},{field:"gross",headerName:"Gross",width:150,align:"right",headerAlign:"center",valueGetter:e=>c(e.row.gross)},{field:"discount",headerName:"Discount",width:150,align:"right",headerAlign:"center",valueGetter:e=>c(e.row.discount)},{field:"net",headerName:"Net",width:150,align:"right",headerAlign:"center",valueGetter:e=>c(e.row.net)},{field:"revenue",headerName:"Revenue",width:150,align:"right",headerAlign:"center",valueGetter:e=>c(e.row.revenue)}],p=a.map(((e,a)=>({id:a+1,sno:a+1,date:e.date,regNo:e.regNo,patientName:e.patientName,gross:e.gross,discount:e.discount,net:e.net,revenue:e.revenue})));return(0,J.jsxs)("div",{style:{height:400,width:"100%"},children:[(0,J.jsx)(pa,{rows:p,columns:u,pageSize:5}),(0,J.jsxs)(r.Dialog,{open:t,onClose:s,maxWidth:"sm",fullWidth:!0,children:[(0,J.jsxs)(r.DialogTitle,{children:["Revenue Details",(0,J.jsx)(r.IconButton,{"aria-label":"close",onClick:s,style:{position:"absolute",right:8,top:8},children:(0,J.jsx)(Ne.A,{})})]}),(0,J.jsx)(r.DialogContent,{children:i&&(0,J.jsxs)(r.Grid,{container:!0,spacing:2,children:[(0,J.jsx)(r.Grid,{item:!0,xs:12,children:(0,J.jsxs)(r.Typography,{variant:"body1",children:[(0,J.jsx)("strong",{children:"Date: "}),d(i.date)]})}),(0,J.jsx)(r.Grid,{item:!0,xs:12,children:(0,J.jsxs)(r.Typography,{variant:"body1",children:[(0,J.jsx)("strong",{children:"Reg No: "}),c(i.regNo)]})}),(0,J.jsx)(r.Grid,{item:!0,xs:12,children:(0,J.jsxs)(r.Typography,{variant:"body1",children:[(0,J.jsx)("strong",{children:"Patient Name: "}),c(i.patientName)]})}),(0,J.jsx)(r.Divider,{style:{marginTop:20,marginBottom:20}}),(0,J.jsx)(r.Grid,{item:!0,xs:12,children:(0,J.jsxs)(r.Typography,{variant:"body1",children:[(0,J.jsx)("strong",{children:"Gross: "}),c(i.gross)]})}),(0,J.jsx)(r.Grid,{item:!0,xs:12,children:(0,J.jsxs)(r.Typography,{variant:"body1",children:[(0,J.jsx)("strong",{children:"Discount: "}),c(i.discount)]})}),(0,J.jsx)(r.Grid,{item:!0,xs:12,children:(0,J.jsxs)(r.Typography,{variant:"body1",children:[(0,J.jsx)("strong",{children:"Net: "}),c(i.net)]})}),(0,J.jsx)(r.Grid,{item:!0,xs:12,children:(0,J.jsxs)(r.Typography,{variant:"body1",children:[(0,J.jsx)("strong",{children:"Revenue: "}),c(i.revenue)]})})]})}),(0,J.jsx)(r.DialogActions,{children:(0,J.jsx)(r.Button,{onClick:s,color:"primary",children:"Close"})})]})]})}var ha=t(80574),xa=t(48361),va=t(62224),ga=t(17696);const ba=[{field:"sNo",headerName:"Queue No",width:150,sortable:!0,filterable:!1,disableColumnMenu:!0,cellClassName:"centeredCell",headerAlign:"center"},{field:"mrdNo",headerName:"MRD No",width:150,sortable:!0,filterable:!1,disableColumnMenu:!0,cellClassName:"centeredCell",headerAlign:"center"},{field:"name",headerName:"Patient Name",width:200,sortable:!0,filterable:!1,disableColumnMenu:!0,cellClassName:"centeredCell",headerAlign:"center"},{field:"consultationDate",headerName:"Last Consultation Date",width:200,sortable:!0,filterable:!1,disableColumnMenu:!0,cellClassName:"centeredCell",headerAlign:"center"},{field:"procedure",headerName:"Procedure",width:180,sortable:!0,filterable:!1,disableColumnMenu:!0,cellClassName:"centeredCell",headerAlign:"center"},{field:"insuranceName",headerName:"Insurance",width:180,sortable:!0,filterable:!1,disableColumnMenu:!0,cellClassName:"centeredCell",headerAlign:"center"},{field:"status",headerName:"Status",width:180,sortable:!0,filterable:!1,disableColumnMenu:!0,renderCell:e=>(0,J.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,J.jsx)(r.Avatar,{sx:{bgcolor:e.value.color,color:"#fff"},children:e.value.initials})}),cellClassName:"centeredCell",headerAlign:"center"},{field:"actions",headerName:"Actions",width:100,sortable:!0,filterable:!1,disableColumnMenu:!0,renderCell:e=>(0,J.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,J.jsx)(ya,{mrdNo:e.row.mrdNo})}),cellClassName:"centeredCell",headerAlign:"center"}];function ja(e){let{dashboardList:a}=e;const[t,n]=l.useState([]);return l.useEffect((()=>{const e=a.map(((e,a)=>({id:e.mrdNo||a,sNo:e.sNo,mrdNo:e.mrdNo,name:e.name,consultationDate:e.consultationDate||"-",procedure:e.procedure||"-",insuranceName:e.insuranceName,status:{color:"N"===e.status?"#ADD8E6":"#fae2d0",initials:"N"===e.status?"N":e.status},actions:e.mrdNo})));n(e)}),[a]),(0,J.jsx)("div",{style:{height:400,width:"100%"},children:(0,J.jsx)(ua.DataGrid,{rows:t,columns:ba,pageSize:5,rowsPerPageOptions:[5],disableSelectionOnClick:!0})})}function ya(e){let{mrdNo:a}=e;const t=(0,p.useNavigate)(),[n,i]=l.useState(null),o=Boolean(n),s=()=>{i(null)},d=e=>{"Open encounter"===e&&t("/doctor/doctorEmr"),s()};return(0,J.jsxs)("div",{children:[(0,J.jsx)(r.IconButton,{onClick:e=>{i(e.currentTarget)},size:"small",children:(0,J.jsx)(ha.A,{})}),(0,J.jsxs)(r.Menu,{anchorEl:n,open:o,onClose:s,children:[(0,J.jsxs)(r.MenuItem,{onClick:()=>d("Refer to OP"),children:[(0,J.jsx)(r.ListItemIcon,{children:(0,J.jsx)(Ze.A,{fontSize:"small"})}),(0,J.jsx)(r.ListItemText,{primary:"Refer to OP"})]}),(0,J.jsxs)(r.MenuItem,{onClick:()=>d("Refer to IP"),children:[(0,J.jsx)(r.ListItemIcon,{children:(0,J.jsx)(xa.A,{fontSize:"small"})}),(0,J.jsx)(r.ListItemText,{primary:"Refer to IP"})]}),(0,J.jsxs)(r.MenuItem,{onClick:()=>d("View Order Form"),children:[(0,J.jsx)(r.ListItemIcon,{children:(0,J.jsx)(va.A,{fontSize:"small"})}),(0,J.jsx)(r.ListItemText,{primary:"View Order Form"})]}),(0,J.jsxs)(r.MenuItem,{onClick:()=>d("Download Report"),children:[(0,J.jsx)(r.ListItemIcon,{children:(0,J.jsx)(ga.A,{fontSize:"small"})}),(0,J.jsx)(r.ListItemText,{primary:"Download Report"})]}),(0,J.jsxs)(r.MenuItem,{children:[(0,J.jsx)(r.ListItemIcon,{children:(0,J.jsx)(va.A,{fontSize:"small"})}),(0,J.jsx)(r.ListItemText,{primary:"View Paitent Details"})]}),(0,J.jsxs)(r.MenuItem,{onClick:()=>d("Open encounter"),children:[(0,J.jsx)(r.ListItemIcon,{children:(0,J.jsx)(va.A,{fontSize:"small"})}),(0,J.jsx)(r.ListItemText,{primary:"Open encounter"})]})]})]})}const fa=e=>{let{selectedCard:a,dashboardList:t,searchByPatientName:l,searchByStatus:n}=e;return(0,J.jsxs)("div",{children:[(0,J.jsx)(ca,{cardTitle:a,searchByPatientName:l,searchByStatus:n}),"Revenue"===a?(0,J.jsx)(ma,{dashboardList:t}):(0,J.jsx)(ja,{dashboardList:t})]})};const Ca={loaderContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",width:"150vw"},svg:{width:"600px",height:"600px"}},Sa=function(){return(0,J.jsx)("div",{style:Ca.loaderContainer,children:(0,J.jsxs)("svg",{version:"1.1",id:"L4",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",xmlSpace:"preserve",style:Ca.svg,children:[(0,J.jsx)("circle",{fill:"#ADD8E6",stroke:"none",cx:"20",cy:"50",r:"4",children:(0,J.jsx)("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1s"})}),(0,J.jsx)("circle",{fill:"#fae2d5",stroke:"none",cx:"40",cy:"50",r:"4",children:(0,J.jsx)("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.2s"})}),(0,J.jsx)("circle",{fill:"#cce7ff",stroke:"none",cx:"60",cy:"50",r:"4",children:(0,J.jsx)("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.3s"})})]})})},Na="#ADD8E6",wa="#d9f2d0",Ia="#fae2d5",Da="#fae2d5",Ta="#cce7ff",ka=()=>{const[e,a]=(0,l.useState)("Today's Appointment"),[t,n]=(0,l.useState)([]),[i,o]=(0,l.useState)([]),[r,s]=(0,l.useState)(""),[d,c]=(0,l.useState)(""),u=async()=>{let e=(await(async(e,a)=>{try{return(await ce.get(`${e}?doctorId=${null===a||void 0===a?void 0:a.doctorId}&ipOpFlag=${null===a||void 0===a?void 0:a.ipOpFlag}`)).data}catch(t){throw console.error("Error fetching doctor dashboard count:",t),t}})("/doctorService/doctor/getCount",{doctorId:1,ipOpFlag:0})).map((e=>{switch(e.displayName){case"Today's Appointment":e.color=Na,e.icon=(0,J.jsx)(Qe.A,{style:{fontSize:"40px"}});break;case"Revenue":e.color=wa,e.icon=(0,J.jsx)(Xe.A,{style:{fontSize:"40px"}});break;case"Emergency Patient":e.color=Ia,e.icon=(0,J.jsx)(Ze.A,{style:{fontSize:"40px"}});break;case"Waiting list":e.color=Da,e.icon=(0,J.jsx)(ea.A,{style:{fontSize:"40px"}});break;case"Telemedicine Appointment":e.color=Ta,e.icon=(0,J.jsx)(aa.A,{style:{fontSize:"40px"}})}return e}));n(e)};(0,l.useEffect)((()=>{u(),(async()=>{if("Today's Appointment"===e){let e=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"todaysAppointment",page:1,size:100,ptName:r,status:d});o(e)}})()}),[]);const p=e=>""===e||void 0===e||NaN===e||null===e?"-":e;return(0,J.jsx)("div",{children:0===t.length&&0===i.length?(0,J.jsx)(Sa,{}):(0,J.jsx)("div",{children:(0,J.jsxs)(Se.Container,{fluid:!0,children:[(0,J.jsxs)(Se.Row,{className:"flex-nowrap",children:[(0,J.jsx)(Se.Col,{xs:12,sm:6,md:4,lg:2,children:(0,J.jsxs)(Se.Card,{style:{width:"200px",height:"200px",backgroundColor:"#fff",borderRadius:"10px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)"},children:[(0,J.jsx)(Se.Card.Img,{variant:"top",src:ta,style:{height:"60%"}}),(0,J.jsx)(Se.Card.Body,{className:"d-flex align-items-center justify-content-center",children:(0,J.jsx)(Se.Card.Title,{className:"text-center",children:"Welcome, Dr. John!"})})]})}),t.map(((e,t)=>(0,J.jsx)(Se.Col,{xs:12,sm:6,md:4,lg:2,children:(0,J.jsx)(Se.Button,{variant:"light",className:"p-0",onClick:()=>(async e=>{switch(a(e),e){case"Today's Appointment":let e=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"todaysAppointment",page:1,size:100,ptName:r,status:d});o(e),s("");break;case"Revenue":let a=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"revenue",page:1,size:100,ptName:r,status:d});o(a),s("");break;case"Emergency Patient":let t=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"emergencyPatient",page:1,size:100,ptName:r,status:d});o(t),s("");break;case"Waiting list":let l=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"waitingList",page:1,size:100,ptName:r,status:d});o(l),s("");break;case"Telemedicine Appointment":let n=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"teleAppointment",page:1,size:100,ptName:r,status:d});o(n),s("")}})(e.displayName),children:(0,J.jsx)(Se.Card,{style:{width:"200px",height:"200px",backgroundColor:e.color,borderRadius:"10px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.1)"},children:(0,J.jsxs)(Se.Card.Body,{className:"d-flex flex-column align-items-center justify-content-center text-white",children:[e.icon,(0,J.jsx)(Se.Card.Title,{className:"mt-2",children:p(e.displayName)}),(0,J.jsx)(Se.Card.Text,{className:"mt-1",style:{fontSize:"24px"},children:p(e.totalCount)})]})})})},e.displayIndex)))]}),(0,J.jsx)(fa,{selectedCard:e,dashboardList:i,searchByPatientName:async a=>{switch(s(a),e){case"Today's Appointment":let e=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"todaysAppointment",page:1,size:100,ptName:a,status:d});o(e);break;case"Revenue":let t=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"revenue",page:1,size:100,ptName:a,status:d});o(t);break;case"Emergency Patient":let l=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"emergencyPatient",page:1,size:100,ptName:a,status:d});o(l);break;case"Waiting list":let n=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"waitingList",page:1,size:100,ptName:a,status:d});o(n);break;case"Telemedicine Appointment":let i=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"teleAppointment",page:1,size:100,ptName:a,status:d});o(i)}},searchByStatus:async a=>{switch("Old Patient"===a?c("O"):"New Patient"===a?c("N"):"Revisit"===a?c("R"):"Walking"===a&&c("W"),e){case"Today's Appointment":let e=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"todaysAppointment",page:1,size:100,ptName:r,status:a?a.label.charAt(0):""});o(e);break;case"Revenue":let t=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"revenue",page:1,size:100,ptName:r,status:a?a.label.charAt(0):""});o(t);break;case"Emergency Patient":let l=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"emergencyPatient",page:1,size:100,ptName:r,status:a?a.label.charAt(0):""});o(l);break;case"Waiting list":let n=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"waitingList",page:1,size:100,ptName:r,status:a?a.label.charAt(0):""});o(n);break;case"Telemedicine Appointment":let i=await ue("/doctorService/doctor/getDataList",{doctorId:1,ipOpFlag:0,context:"teleAppointment",page:1,size:100,ptName:r,status:a?a.label.charAt(0):""});o(i)}}})]})})})};var Aa=t(11580);const Pa=()=>{const[e,a]=(0,l.useState)({doctorId:"",title:"",startTime:"",endTime:""}),[t,n]=(0,l.useState)([]),i=t=>{const{name:l,value:n}=t.target;a({...e,[l]:n})};return(0,J.jsxs)(r.Box,{width:"50%",children:[(0,J.jsx)(Se.Form,{children:(0,J.jsxs)(Se.Row,{className:"mb-3",children:[(0,J.jsxs)(Se.Form.Group,{children:[(0,J.jsx)(Se.Form.Label,{className:"mt-3",children:"Specialist"}),(0,J.jsxs)(Se.Form.Select,{value:e.doctorId,onChange:i,name:"doctorId",children:[(0,J.jsx)("option",{value:"-1",children:"select..."}),t.map((e=>(0,J.jsx)("option",{value:e.doctorId,children:e.doctorName})))]})]}),(0,J.jsxs)(Se.Form.Group,{children:[(0,J.jsx)(Se.Form.Label,{className:"mt-3",children:"Title"}),(0,J.jsx)(Se.Form.Control,{name:"title",required:!0,value:e.title,type:"text",onChange:i})]}),(0,J.jsxs)(Se.Form.Group,{children:[(0,J.jsx)(Se.Form.Label,{className:"mt-3",children:"Start Time"}),(0,J.jsx)(r.Box,{width:"100%",children:(0,J.jsx)(Aa.A,{name:"startTime",onChange:t=>{a({...e,startTime:null===t||void 0===t?void 0:t.format("HH:mm:ss")})},ampm:!1,sx:{width:"100%"}})})]}),(0,J.jsxs)(Se.Form.Group,{children:[(0,J.jsx)(Se.Form.Label,{className:"mt-3",children:"End Time"}),(0,J.jsx)(r.Box,{width:"100%",children:(0,J.jsx)(Aa.A,{name:"endTime",onChange:t=>{a({...e,endTime:null===t||void 0===t?void 0:t.format("HH:mm:ss")})},sx:{width:"100%"},ampm:!1})})]})]})}),(0,J.jsx)(r.Box,{display:"flex",padding:"0.5em",width:"100%",justifyContent:"flex-end",children:(0,J.jsx)(Se.Button,{color:"danger",onClick:()=>{},children:"Block Availability"})})]})},Ba=()=>{const[e,a]=(0,l.useState)("user_privileges"),[t,n]=(0,l.useState)([{role:"Admin",canViewPage1:!0,canViewPage2:!0,canEdit:!0,canDelete:!0},{role:"Receptionist",canViewPage1:!0,canViewPage2:!1,canEdit:!1,canDelete:!1},{role:"Doctor",canViewPage1:!0,canViewPage2:!0,canEdit:!0,canDelete:!1},{role:"Nurse",canViewPage1:!0,canViewPage2:!1,canEdit:!1,canDelete:!1},{role:"Cash Counter",canViewPage1:!0,canViewPage2:!1,canEdit:!1,canDelete:!1}]),i=(e,a)=>{const l=[...t];l[e][a]=!l[e][a],n(l)};return(0,J.jsx)(be,{children:(0,J.jsxs)(r.Box,{p:2,sx:{backgroundColor:"white",borderRadius:"8px"},children:[(0,J.jsx)(r.Box,{display:"flex",justifyContent:"flex-start",children:(0,J.jsx)(Ce,{tabsList:[{name:"User privileges",value:"user_privileges",icon:""},{name:"Block Availability",value:"block_availability",icon:""},{name:"Release Availability",value:"release_availability",icon:""}],defaultTab:"user_privileges",setActiveTab:a})}),"user_privileges"===e&&(0,J.jsx)(r.Box,{mt:4,children:(0,J.jsx)(r.TableContainer,{component:r.Paper,elevation:3,children:(0,J.jsxs)(r.Table,{children:[(0,J.jsx)(r.TableHead,{children:(0,J.jsxs)(r.TableRow,{children:[(0,J.jsx)(r.TableCell,{sx:{fontWeight:"bold",backgroundColor:"#e0e0e0"},children:"Roles"}),t.map((e=>(0,J.jsx)(r.TableCell,{sx:{fontWeight:"bold",backgroundColor:"#e0e0e0"},children:e.role},e.role)))]})}),(0,J.jsxs)(r.TableBody,{children:[(0,J.jsxs)(r.TableRow,{children:[(0,J.jsx)(r.TableCell,{sx:{fontWeight:"bold",backgroundColor:"#e0f7fa"},children:"Dashboard"}),t.map(((e,a)=>(0,J.jsx)(r.TableCell,{align:"center",children:(0,J.jsx)(r.Checkbox,{checked:e.canViewPage1,onChange:()=>i(a,"canViewPage1")})},`${e.role}-dashboard`)))]}),(0,J.jsxs)(r.TableRow,{children:[(0,J.jsx)(r.TableCell,{sx:{fontWeight:"bold",backgroundColor:"#e0f7fa"},children:"Appointment"}),t.map(((e,a)=>(0,J.jsx)(r.TableCell,{align:"center",children:(0,J.jsx)(r.Checkbox,{checked:e.canViewPage1,onChange:()=>i(a,"canViewPage1")})},`${e.role}-appointment`)))]}),(0,J.jsxs)(r.TableRow,{children:[(0,J.jsx)(r.TableCell,{sx:{fontWeight:"bold",backgroundColor:"#e0f7fa"},children:"Registration"}),t.map(((e,a)=>(0,J.jsx)(r.TableCell,{align:"center",children:(0,J.jsx)(r.Checkbox,{checked:e.canViewPage1,onChange:()=>i(a,"canViewPage1")})},`${e.role}-registration`)))]}),(0,J.jsxs)(r.TableRow,{children:[(0,J.jsx)(r.TableCell,{sx:{fontWeight:"bold",backgroundColor:"#e0f7fa"},children:"Billing"}),t.map(((e,a)=>(0,J.jsx)(r.TableCell,{align:"center",children:(0,J.jsx)(r.Checkbox,{checked:e.canViewPage1,onChange:()=>i(a,"canViewPage1")})},`${e.role}-billing`)))]}),(0,J.jsxs)(r.TableRow,{children:[(0,J.jsx)(r.TableCell,{sx:{fontWeight:"bold",backgroundColor:"#e0f7fa"},children:"Previllages"}),t.map(((e,a)=>(0,J.jsx)(r.TableCell,{align:"center",children:(0,J.jsx)(r.Checkbox,{checked:e.canViewPage1,onChange:()=>i(a,"canViewPage1")})},`${e.role}-billing`)))]})]})]})})}),"release_availability"===e&&(0,J.jsx)(r.Box,{children:"Release Availability"}),"block_availability"===e&&(0,J.jsx)(r.Box,{display:"flex",justifyContent:"center",mt:2,children:(0,J.jsx)(Pa,{})})]})})},Ra=e=>{let{show:a}=e;return(0,J.jsx)(J.Fragment,{children:a&&(0,J.jsx)("div",{className:"fullscreen-loader",children:(0,J.jsx)(Se.Spinner,{style:{color:"green"}})})})};var _a=t(35862),Fa=t(43655),Ea=t(21079),La=t.n(Ea);const Ma=e=>{let{itemsArray:a,callbackParam:t}=e;const[n,i]=(0,l.useState)(null),o=e=>{i(null),La().isEmpty(e)&&e(t)};return(0,J.jsxs)("div",{children:[(0,J.jsx)(r.IconButton,{"aria-controls":"menu","aria-haspopup":"true",onClick:e=>{i(e.currentTarget)},color:"inherit",children:(0,J.jsx)(Fa.A,{})}),(0,J.jsx)(r.Menu,{id:"menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:o,children:a.map((e=>(0,J.jsxs)(r.MenuItem,{onClick:()=>o(e.callback),children:[(0,J.jsx)(e.icon,{}),"\xa0",e.name]})))})]})};var Oa=t(24305);const za=[{claim_no:1,insurar_name:"Test",invoice_no:"31312",invoice_date:"28-11-2024",patient_name:"Akash",mrd_no:"233423",status:"Confirmed",actions:""},{claim_no:2,insurar_name:"Test",invoice_no:"31312",invoice_date:"28-11-2024",patient_name:"Akash",mrd_no:"233423",status:"Confirmed",actions:""},{claim_no:3,insurar_name:"Test",invoice_no:"31312",invoice_date:"28-11-2024",patient_name:"Akash",mrd_no:"233423",status:"Confirmed",actions:""},{claim_no:6,insurar_name:"Test",invoice_no:"31312",invoice_date:"28-11-2024",patient_name:"Akash",mrd_no:"233423",status:"Confirmed",actions:""},{claim_no:7,insurar_name:"Test",invoice_no:"31312",invoice_date:"28-11-2024",patient_name:"Akash",mrd_no:"233423",status:"Confirmed",actions:""}],Wa=()=>{const[e,a]=(0,l.useState)({}),[t,n]=(0,l.useState)("--All--"),[i,o]=(0,l.useState)([]),{loading:s,setLoading:d}=he(),[c,u]=(0,l.useState)(0),[m,h]=(0,l.useState)(0),[x,v]=(0,l.useState)(0),[g,b]=(0,l.useState)(!1),j=(0,l.useRef)(),y=(0,p.useNavigate)(),f=[{id:"SI.No",label:"SI.No",filter:!1},{id:"insurar_name",label:"Insurar Name",filter:!0,type:"input"},{id:"Total Claims",label:"Invoice NO",filter:!0,type:"input"},{id:"invoice_date",label:" Invoice Date",filter:!0,type:"date"},{id:"patient_name",label:"Patient Name",filter:!0,type:"input"},{id:"mrd_no",label:"MRD No",filter:!0,type:"input"},{id:"status",label:"Status",filter:!0,type:"select"},{id:"actions",label:"Options",filter:!1}],C=[{id:"all",label:"--All--"},{id:"pending",label:"Pending"},{id:"verified",label:"Verified"},{id:"submitted",label:"Submitted"},{id:"re-submitted_pending",label:"Re-Submitted Pending"},{id:"re-verified",label:"Re-Verified"},{id:"re-submitted",label:"Re-Submitted"},{id:"re-re-submitted_pending",label:"Re-Re-Submitted Pending"},{id:"re-re-verified",label:"Re-Re-Verified"},{id:"re-re-submitted",label:"Re-Re-Submitted"},{id:"write_off",label:"Write Off"},{id:"cancelled ",label:"Cancelled"}],S=(t,l,i)=>{"select"===i&&n(l),a({...e,[t]:l})},N=[{name:"Create Patient Visit",icon:Oa.A,callback:e=>{y("/secure/registration")}}];return(0,J.jsxs)(r.Box,{padding:"1em",width:"100%",children:[(0,J.jsxs)(r.Box,{display:"flex",justifyContent:"space-between",children:[(0,J.jsx)(r.Box,{children:"OP INSURANCE : CLAIM INVOICES LIST"}),(0,J.jsx)(r.Box,{children:qe()().format("LLLL")})]}),(0,J.jsx)(Ra,{show:s}),(0,J.jsx)(r.TableContainer,{style:{height:"75vh"},component:r.Paper,onScroll:()=>{const{scrollTop:e,clientHeight:a,scrollHeight:t}=j.current;t-e<=a+1&&g&&v((e=>e+1))},ref:j,children:(0,J.jsxs)(r.Table,{style:{overflow:"auto"},children:[(0,J.jsxs)(r.TableHead,{sx:{height:"1em"},children:[(0,J.jsx)(r.TableRow,{children:f.map((e=>(0,J.jsx)(r.TableCell,{children:e.label})))}),(0,J.jsx)(r.TableRow,{style:{backgroundColor:"white"},children:f.map((l=>(0,J.jsxs)(r.TableCell,{padding:"8px",children:[l.filter&&"input"===l.type&&(0,J.jsx)(r.TextField,{size:"small",id:l.id,className:"filter-input",value:e[l.id]||"",onChange:e=>S(l.id,e.target.value,"input"),children:l.label}),l.filter&&"date"===l.type&&(0,J.jsx)(_a.l,{className:"filter-input",slotProps:{actionBar:{actions:["clear"]}},onChange:t=>((t,l)=>{let n=qe()(l).format("DD/MM/YYYY");a("Invalid date"===n?{...e,[t]:""}:{...e,[t]:n})})(l.id,t)}),l.filter&&"select"===l.type&&(0,J.jsx)(r.FormControl,{fullWidth:!0,children:(0,J.jsx)(r.Select,{id:"status-select",className:"filter-input",value:t,onChange:e=>S(l.id,e.target.value,"select"),children:C.map(((e,a)=>(0,J.jsx)(r.MenuItem,{value:e.label,children:e.label},`${e.id}_${a}`)))})})]})))})]}),(0,J.jsx)(r.TableBody,{children:null===za||void 0===za?void 0:za.map((e=>(0,J.jsxs)(r.TableRow,{children:[f.map((a=>"actions"!==a.id&&(0,J.jsx)(r.TableCell,{children:e[a.id]},a.id))),(0,J.jsx)(r.TableCell,{children:(0,J.jsx)(Ma,{itemsArray:N,callbackParam:{data:e,from:"schedule_list"}})})]},e.id)))})]})})]})},Ya=()=>{const[e,a]=(0,l.useState)({}),[t,n]=(0,l.useState)("--All--"),[i,o]=(0,l.useState)([]),{loading:s,setLoading:d}=he(),[c,u]=(0,l.useState)(0),[m,h]=(0,l.useState)(0),[x,v]=(0,l.useState)(0),[g,b]=(0,l.useState)(!1),j=(0,l.useRef)(),y=(0,p.useNavigate)(),f=[{id:"claim_no",label:"Claim No",filter:!1},{id:"insurar_name",label:"Insurar Name",filter:!1},{id:"total_claims",label:"Total Claims",width:200,filter:!1,children:[{id:"count",label:"Count",filter:!0,type:"input"},{id:"Amount",label:"amount",filter:!0,type:"input"}]},{id:"pending_claims",label:"Pending Claims",filter:!1,width:500,children:[{id:"verification",label:"Verification",filter:!1,children:[{id:"count",label:"Count",filter:!0,type:"input"},{id:"Amount",label:"amount",filter:!0,type:"input"}]},{id:"submission",label:"Submission",filter:!1,children:[{id:"count",label:"Count",filter:!0,type:"input"},{id:"Amount",label:"amount",filter:!0,type:"input"}]}]},{id:"Submitted Claims",label:"submitted_claims",filter:!1,width:250,children:[{id:"count",label:"Count",filter:!0,type:"input"},{id:"Amount",label:"amount",filter:!0,type:"input"}]}],C=[{id:"all",label:"--All--"},{id:"pending",label:"Pending"},{id:"verified",label:"Verified"},{id:"submitted",label:"Submitted"},{id:"re-submitted_pending",label:"Re-Submitted Pending"},{id:"re-verified",label:"Re-Verified"},{id:"re-submitted",label:"Re-Submitted"},{id:"re-re-submitted_pending",label:"Re-Re-Submitted Pending"},{id:"re-re-verified",label:"Re-Re-Verified"},{id:"re-re-submitted",label:"Re-Re-Submitted"},{id:"write_off",label:"Write Off"},{id:"cancelled ",label:"Cancelled"}],S=(t,l,i)=>{"select"===i&&n(l),a({...e,[t]:l})};Oa.A;return(0,J.jsxs)(r.Box,{padding:"1em",width:"100%",id:"manual-insurance-page",children:[(0,J.jsxs)(r.Box,{display:"flex",justifyContent:"space-between",children:[(0,J.jsx)(r.Box,{children:"OP INSURANCE : CLAIM INVOICES LIST"}),(0,J.jsx)(r.Box,{children:qe()().format("LLLL")})]}),(0,J.jsx)(Ra,{show:s}),(0,J.jsx)(r.TableContainer,{style:{height:"75vh"},component:r.Paper,onScroll:()=>{const{scrollTop:e,clientHeight:a,scrollHeight:t}=j.current;t-e<=a+1&&g&&v((e=>e+1))},ref:j,children:(0,J.jsxs)(r.Table,{style:{overflow:"auto"},children:[(0,J.jsxs)(r.TableHead,{sx:{height:"1em"},children:[(0,J.jsx)(r.TableRow,{children:f.map((e=>(0,J.jsx)(r.TableCell,{children:e.children?(0,J.jsxs)(r.Box,{width:e.width?`${e.width}px`:"200px",children:[(0,J.jsx)(r.Box,{children:e.label}),(0,J.jsx)("hr",{}),(0,J.jsx)(r.Box,{display:"flex",px:1,children:e.children.map((e=>(console.log({child:e}),e.children?(0,J.jsxs)(r.Box,{width:"500px",children:[(0,J.jsx)(r.Box,{children:e.label}),(0,J.jsx)("hr",{}),(0,J.jsx)(r.Box,{display:"flex",px:1,children:e.children.map((e=>(0,J.jsxs)(r.Box,{width:"50%",children:[e.label," ",(0,J.jsx)("hr",{})]})))})]}):(0,J.jsxs)(r.Box,{width:"50%",children:[e.label," ",(0,J.jsx)("hr",{})]}))))})]}):(0,J.jsx)(r.Box,{children:e.label})})))}),(0,J.jsx)(r.TableRow,{style:{backgroundColor:"white"},children:f.map((l=>(0,J.jsxs)(r.TableCell,{padding:"8px",children:[l.filter&&"input"===l.type&&(0,J.jsx)(r.TextField,{size:"small",id:l.id,className:"filter-input",value:e[l.id]||"",onChange:e=>S(l.id,e.target.value,"input"),children:l.label}),l.filter&&"date"===l.type&&(0,J.jsx)(_a.l,{className:"filter-input",slotProps:{actionBar:{actions:["clear"]}},onChange:t=>((t,l)=>{let n=qe()(l).format("DD/MM/YYYY");a("Invalid date"===n?{...e,[t]:""}:{...e,[t]:n})})(l.id,t)}),l.filter&&"select"===l.type&&(0,J.jsx)(r.FormControl,{fullWidth:!0,children:(0,J.jsx)(r.Select,{id:"status-select",className:"filter-input",value:t,onChange:e=>S(l.id,e.target.value,"select"),children:C.map(((e,a)=>(0,J.jsx)(r.MenuItem,{value:e.label,children:e.label},`${e.id}_${a}`)))})})]})))})]}),(0,J.jsx)(r.TableBody,{children:null===za||void 0===za?void 0:za.map((e=>(0,J.jsx)(r.TableRow,{children:f.map((a=>"actions"!==a.id&&(0,J.jsx)(r.TableCell,{children:e[a.id]},a.id)))},e.id)))})]})})]})},Va=()=>{const[e,a]=(0,l.useState)("claim_details");return(0,J.jsxs)(r.Box,{m:"20px",children:[(0,J.jsx)(r.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,J.jsx)(Ce,{tabsList:[{name:"Claim Details",value:"claim_details"},{name:"Manual Submission",value:"manual_submission"},{name:"E-submission",value:"e_submission"},{name:"Re-Submission",value:"re_submission"},{name:"Prior Request",value:"prior_request"}],defaultTab:"claim_details",setActiveTab:a})}),(0,J.jsxs)(r.Box,{children:["claim_details"===e&&(0,J.jsx)(Wa,{}),"manual_submission"===e&&(0,J.jsx)(Ya,{}),"e_submission"===e&&(0,J.jsx)(J.Fragment,{}),"re_submission"===e&&(0,J.jsx)(J.Fragment,{}),"prior_request"===e&&(0,J.jsx)(J.Fragment,{})]})]})},Ha=()=>{const[e,a]=(0,l.useState)("generate_claim");return(0,J.jsxs)(r.Box,{m:"20px",children:[(0,J.jsx)(r.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,J.jsx)(Ce,{tabsList:[{name:"Generate Claim",value:"generate_claim"},{name:"List of Claims",value:"list_of_claims"},{name:"Manual Submission ",value:"manual_submission"},{name:"E-submission",value:"e_submission"},{name:"Re-Submission",value:"re_submission"}],defaultTab:"generate_claim",setActiveTab:a})}),(0,J.jsxs)(r.Box,{children:["generate_claim"===e&&(0,J.jsx)(J.Fragment,{}),"list_of_claims"===e&&(0,J.jsx)(J.Fragment,{}),"manual_submission"===e&&(0,J.jsx)(J.Fragment,{}),"e_submission"===e&&(0,J.jsx)(J.Fragment,{}),"re_submission"===e&&(0,J.jsx)(J.Fragment,{})]})]})},qa=()=>{const[e,a]=(0,l.useState)("referral_registration");return(0,J.jsxs)(r.Box,{m:"20px",children:[(0,J.jsx)(r.Box,{display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,J.jsx)(Ce,{tabsList:[{name:"Referral Registration",value:"referral_registration"},{name:"Referral Visit",value:"referral_visit"},{name:"Referral Registration List",value:"referral_Registration_list"}],defaultTab:"referral_registration",setActiveTab:a})}),(0,J.jsxs)(r.Box,{children:["referral_registration"===e&&(0,J.jsx)(J.Fragment,{}),"referral_visit"===e&&(0,J.jsx)(J.Fragment,{}),"referral_Registration_list"===e&&(0,J.jsx)(J.Fragment,{})]})]})},Ga=()=>{const[e,a]=(0,l.useState)("op_insurance"),t=za;return console.log(t,"data"),(0,J.jsx)(be,{children:(0,J.jsxs)(r.Box,{m:"20px",id:"insurance-page",children:[(0,J.jsx)(Ce,{tabsList:[{name:"OP INSURANCE",value:"op_insurance"},{name:"IP INSURANCE",value:"ip_insurance"},{name:"REFERRAL REGISTRATION",value:"referral_registration"}],defaultTab:"op_insurance",setActiveTab:a}),(0,J.jsxs)(r.Box,{children:["op_insurance"===e&&(0,J.jsx)(Va,{}),"ip_insurance"===e&&(0,J.jsx)(Ha,{}),"referral_registration"===e&&(0,J.jsx)(qa,{})]})]})})},$a=()=>(0,J.jsx)(r.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100%"},children:(0,J.jsx)(r.CircularProgress,{})});var Ua=t(27056),Ka=t(97332);const Ja=(0,b.createAsyncThunk)("timeslot/doctorAvailability",(async(e,a)=>{let{rejectWithValue:t}=a;try{const a=await C.get(T,{params:e}),{data:t,status:l,statusText:n}=a;return{data:t,status:l,statusText:n}}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),Qa=(0,b.createSlice)({name:"doctorAvailability",initialState:{doctorAvailableData:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Ja.pending,(e=>{e.loading=!0,e.error=null})).addCase(Ja.fulfilled,((e,a)=>{e.loading=!1,e.doctorAvailableData=a.payload.data})).addCase(Ja.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,Xa=(0,b.createAsyncThunk)("appointment/bookAppointment",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.post(L,e)}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),Za=(0,b.createSlice)({name:"bookAppointment",initialState:{bookAppointmentdata:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Xa.pending,(e=>{e.loading=!0,e.error=null})).addCase(Xa.fulfilled,((e,a)=>{e.loading=!1,e.bookAppointmentdata=a.payload.data})).addCase(Xa.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,et=e=>{let{setEventData:a,selectedPatient:t}=e;const[n,i]=(0,l.useState)({scheduleType:"",numberOfSlots:1,mrdNo:"",patientName:"",dob:"",age:"",gender:"",phoneNo:"",emailId:"",notes:"",additionalInfo:"",insurarName:"",notifyPatient:!1}),[o,s]=(0,l.useState)(!1);(0,l.useEffect)((()=>{a(n)}),[n]);const d=e=>{const{name:a,value:t,type:l,checked:n}=e.target;i((e=>({...e,[a]:"checkbox"===l?n:t})))};return(0,l.useEffect)((()=>{if(t){let e=t.dob,a=t.name;e=e?e.split("T")[0]:"",i({...n,...t,dob:e,patientName:a})}}),[t]),(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(r.Box,{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:2,children:[(0,J.jsxs)(r.TextField,{select:!0,fullWidth:!0,value:n.scheduleType,onChange:d,name:"scheduleType",variant:"outlined",size:"small",label:(0,J.jsxs)(J.Fragment,{children:["Schedule Type ",(0,J.jsx)("span",{style:{color:"red"},children:"*"})]}),children:[(0,J.jsx)(r.MenuItem,{value:"-1",children:"Select..."}),[{type:"Routine Check-Up",id:"1"},{type:"Consultation",id:"2"},{type:"Follow-Up Appointment",id:"3"},{type:"Urgent Care",id:"4"},{type:"Pediatric Appointment",id:"5"},{type:"Chronic Disease Management",id:"6"},{type:"Emergency Visit",id:"7"}].map((e=>(0,J.jsx)(r.MenuItem,{value:e.type,children:e.type},e.type)))]}),(0,J.jsxs)(r.TextField,{select:!0,fullWidth:!0,value:n.numberOfSlots,onChange:e=>d(e),name:"numberOfSlots",variant:"outlined",size:"small",label:"No of Slots",children:[(0,J.jsx)(r.MenuItem,{value:"-1",children:"Select..."}),[1,2,3,4,5,6,7,8].map((e=>(0,J.jsx)(r.MenuItem,{value:e,children:e},e)))]}),(0,J.jsx)(r.TextField,{fullWidth:!0,name:"mrdNo",value:n.mrdNo,onChange:d,variant:"outlined",size:"small",label:"MRD No"}),(0,J.jsx)(r.TextField,{fullWidth:!0,name:"patientName",value:n.patientName,onChange:d,variant:"outlined",size:"small",label:(0,J.jsxs)(J.Fragment,{children:["Patient Name ",(0,J.jsx)("span",{style:{color:"red"},children:"*"})]})}),(0,J.jsx)(r.TextField,{fullWidth:!0,name:"dob",value:n.dob,type:"date",onChange:d,variant:"outlined",size:"small",label:(0,J.jsxs)(J.Fragment,{children:[" ","Date of Birth ",(0,J.jsx)("span",{style:{color:"red"},children:"*"})]}),InputLabelProps:{shrink:!0}}),(0,J.jsx)(r.TextField,{fullWidth:!0,name:"age",value:n.age,type:"number",onChange:d,variant:"outlined",size:"small",label:(0,J.jsxs)(J.Fragment,{children:[" ","Age ",(0,J.jsx)("span",{style:{color:"red"},children:"*"})]})}),(0,J.jsxs)(r.TextField,{select:!0,fullWidth:!0,name:"gender",value:n.gender,onChange:e=>d(e),variant:"outlined",size:"small",label:(0,J.jsxs)(J.Fragment,{children:[" ","Gender ",(0,J.jsx)("span",{style:{color:"red"},children:"*"})]}),children:[(0,J.jsx)(r.MenuItem,{value:"Female",children:"Female"}),(0,J.jsx)(r.MenuItem,{value:"Male",children:"Male"}),(0,J.jsx)(r.MenuItem,{value:"Other",children:"Other"})]}),(0,J.jsx)(r.TextField,{fullWidth:!0,name:"phoneNo",value:n.phoneNo,type:"tel",onChange:d,placeholder:"Search or type...",variant:"outlined",size:"small",label:(0,J.jsxs)(J.Fragment,{children:[" ","Mobile ",(0,J.jsx)("span",{style:{color:"red"},children:"*"})]})}),(0,J.jsx)(r.TextField,{fullWidth:!0,name:"emailId",value:n.emailId,type:"emailId",onChange:d,variant:"outlined",size:"small",label:(0,J.jsxs)(J.Fragment,{children:[" ","Email ",(0,J.jsx)("span",{style:{color:"red"},children:"*"})]})}),(0,J.jsx)(r.TextField,{fullWidth:!0,label:"Insurer Name",name:"insurarName",value:n.insurarName,onChange:d,variant:"outlined",size:"small"}),(0,J.jsx)(r.TextField,{fullWidth:!0,name:"notes",value:n.notes,multiline:!0,onChange:d,variant:"outlined",size:"small",label:"Notes"}),(0,J.jsx)(r.TextField,{fullWidth:!0,name:"additionalInfo",value:n.additionalInfo,multiline:!0,onChange:d,variant:"outlined",size:"small",label:"Additional Info"})]}),(0,J.jsxs)(r.Box,{display:"flex",flexDirection:"column",children:[(0,J.jsx)(r.FormControlLabel,{control:(0,J.jsx)(r.Checkbox,{checked:o,onChange:e=>s(e.target.checked),name:"showNotify"}),label:"Notify Patient"}),o&&(0,J.jsx)(r.FormControl,{component:"fieldset",children:(0,J.jsxs)(r.RadioGroup,{name:"notifyPatient",value:n.notifyPatient,onChange:e=>d(e),row:!0,children:[(0,J.jsx)(r.FormControlLabel,{value:"sms",control:(0,J.jsx)(r.Radio,{}),label:"SMS"}),(0,J.jsx)(r.FormControlLabel,{value:"whatsapp",control:(0,J.jsx)(r.Radio,{}),label:"WhatsApp"}),(0,J.jsx)(r.FormControlLabel,{value:"mail",control:(0,J.jsx)(r.Radio,{}),label:"Mail"})]})})]})]})},at=e=>{var a,t;let{open:n,setOpen:i,handleClose:s,selectedSlot:d,activeTab:c,specialistList:u,facilityList:p,slotDuration:m,getAvailableSlotsForAllDoctors:h,getAllFacilitySchedules:x,addEventToState:v,slotInfo:g,selecteddoctorData:b}=e;const j=(0,r.useTheme)(),y="MMMM Do YYYY, h:mm A",[f,C]=(0,l.useState)(null),{loading:S,setLoading:N}=he(),[w,I]=(0,l.useState)(""),[D,T]=(0,l.useState)(),k=(0,o.useDispatch)(),{searchPatientData:A}=(0,o.useSelector)((e=>null===e||void 0===e?void 0:e.searchPatient));console.log("selectedData:",A);const P=e=>{const a=e.target.value;k(Oe({searchKey:a})),I(a)};return(0,J.jsxs)(r.Dialog,{open:n,onClose:s,maxWidth:"lg",fullWidth:!0,children:[(0,J.jsx)(Ra,{show:S}),(0,J.jsxs)(r.DialogContent,{dividers:!0,children:[(0,J.jsx)("h5",{children:"Book New Appointment"}),(0,J.jsxs)(r.Box,{paddingTop:"1em",children:[(0,J.jsx)("b",{children:"Booking Date:"})," ",qe()(null===d||void 0===d?void 0:d.start).format(y)," ","- ",qe()(null===d||void 0===d?void 0:d.end).format(y)]}),"string"===typeof(null===d||void 0===d?void 0:d.resourceId)&&!La().isNull(parseInt(d.resourceId.split("_")[1]))&&(0,J.jsxs)(r.Box,{paddingY:"1em",children:[(0,J.jsx)("b",{children:"users"===c?"With Doctor:":"For Facility:"})," ","users"===c?null===(a=u.find((e=>e.doctorId===parseInt(d.resourceId.split("_")[1]))))||void 0===a?void 0:a.doctorName:null===(t=p.find((e=>e.facilityId===parseInt(d.resourceId.split("_")[1]))))||void 0===t?void 0:t.doctorName]}),(0,J.jsxs)(r.Box,{padding:"1em",border:`1px solid ${j.palette.divider}`,mt:1,borderRadius:2,children:[(0,J.jsxs)(r.Box,{pb:4,pt:1,children:[(0,J.jsx)(r.Autocomplete,{freeSolo:!0,options:(null===A||void 0===A?void 0:A.data)||[],getOptionLabel:e=>e.name||"",renderInput:e=>(0,J.jsx)(r.TextField,{...e,label:"Search Patients",variant:"outlined",value:w,onChange:P,placeholder:"Type to search...",size:"small",sx:{width:300}}),onChange:(e,a)=>{T(a)}}),(0,J.jsx)("div",{style:{fontSize:"0.7em"},children:"For existing patients search patients with phone, name, dob, or email for auto fill."})]}),(0,J.jsx)(et,{activeTab:c,setEventData:C,resourceId:d.resourceId,specialistList:u,setLoading:N,loading:S,selectedPatient:D})]}),(0,J.jsxs)(r.DialogActions,{children:[(0,J.jsx)(r.Button,{variant:"outlined",onClick:s,children:"Cancel"}),(0,J.jsx)(r.Button,{variant:"contained",onClick:async e=>{var a;if(!f)return void console.error("eventData is not available");const t=qe()(d.start).format("YYYY-MM-DD");let l={branchId:b.branchId,timeInterval:parseInt(m),appointmentTime:qe()(d.start).format("HH:mm:ss"),appointmentEndTime:qe()(d.end).format("HH:mm:ss"),specialityId:null===(a=b.selectedSpecialityData)||void 0===a?void 0:a.specialityId,doctorId:b.doctorId,patientId:null===D||void 0===D?void 0:D.patientId},n={...f,...l};n={branchId:n.branchId,specialityId:n.specialityId,doctorId:n.doctorId,appointmentDate:t,appointmentTime:n.appointmentTime,timeInterval:n.timeInterval,scheduleType:n.scheduleType,mrdNo:n.mrdNo,notes:n.notes,additionalInfo:n.additionalInfo,insurarName:n.insurarName,numberOfSlots:n.numberOfSlots,notifyPatient:n.notifyPatient,patientName:n.patientName,dob:n.dob,age:n.age,gender:n.gender,phoneNo:n.phoneNo,email:n.emailId,patientId:n.patientId};try{var o,r;N(!0);const e=await k(Xa(n)),a=null!==(o=null===e||void 0===e||null===(r=e.payload)||void 0===r?void 0:r.message)&&void 0!==o?o:"Appointment booked successfully",t={id:`appointment_${Date.now()}`,title:"",start:g.start,end:g.end,resourceId:g.resourceId};v(t),console.log("New Event Added:",t),"users"===c?h():"rooms"===c&&x(),ne([a],"success"),i(!1)}catch(u){var s;console.error("Booking Error:",u),ne([null!==(s=null===u||void 0===u?void 0:u.message)&&void 0!==s?s:"Something went wrong! Please try again."],"error")}finally{N(!1)}},children:"Create"})]})]})]})},tt=(0,b.createAsyncThunk)("appointment/cancelSchedule",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.post(z,e)}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),lt=(0,b.createSlice)({name:"cancelSchedule",initialState:{data:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(tt.pending,(e=>{e.loading=!0,e.error=null})).addCase(tt.fulfilled,((e,a)=>{e.loading=!1,e.data=a.payload.data})).addCase(tt.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,nt=e=>{let{handleClose:a,appointmentId:t,getAvailableSlotsForAllDoctors:n}=e;const{loading:i,setLoading:s}=he(),[d,c]=(0,l.useState)(!1),[u,p]=(0,l.useState)(""),m=(0,o.useDispatch)(),h=JSON.parse(localStorage.getItem("user")),{data:x}=(0,o.useSelector)((e=>e.cancel));x.statusCode;console.log(t,"events");return(0,J.jsxs)(r.Dialog,{open:!0,onClose:a,fullWidth:!0,maxWidth:"sm",children:[(0,J.jsx)(Ra,{show:i}),(0,J.jsx)(r.DialogTitle,{children:"Cancel Appointment"}),(0,J.jsxs)(r.DialogContent,{children:[(0,J.jsx)(r.Box,{paddingY:2,fontWeight:"bold",children:"Are you sure you want to cancel this appointment?"}),(0,J.jsxs)(r.FormControl,{fullWidth:!0,margin:"normal",size:"small",children:[(0,J.jsx)(r.InputLabel,{children:"Reason For Cancellation"}),(0,J.jsxs)(r.Select,{value:u,onChange:e=>{const a=e.target.value;p(a),c("Others"===a)},label:"Reason For Cancellation",children:[(0,J.jsx)(r.MenuItem,{value:"",children:"Select..."}),["No Show","Change of Plans","Overlapping Appointments","Doctor Unavailability","Others"].map((e=>(0,J.jsx)(r.MenuItem,{value:e,children:e},e)))]})]}),d&&(0,J.jsx)(r.TextField,{label:"Reason",fullWidth:!0,margin:"normal",size:"small",onChange:e=>{p(e.target.value)}})]}),(0,J.jsxs)(r.DialogActions,{children:[(0,J.jsx)(r.Button,{onClick:a,variant:"outlined",color:"secondary",children:"Go Back"}),(0,J.jsx)(r.Button,{onClick:async()=>{if(u){s(!0);try{var e;await m(tt({appointmentId:t,cancellationReason:u,cancelledBy:null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.userName})).unwrap();await n(),ne(["Appointment Cancelled successfully"],"success"),a()}catch(l){ne([l||"Something went wrong"],"error")}}else ne(["Please select a reason for cancellation"],"warning")},variant:"contained",color:"error",children:"Yes, Cancel"})]})]})},it=(0,b.createAsyncThunk)("appointment/reSchedule",(async(e,a)=>{let{rejectWithValue:t}=a;try{return(await C.put(O,e)).data}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),ot=(0,b.createSlice)({name:"reSchedule",initialState:{data:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(it.pending,(e=>{e.loading=!0,e.error=null})).addCase(it.fulfilled,((e,a)=>{e.loading=!1,e.data=a.payload.data})).addCase(it.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,rt=e=>{let{handleClose:a,appointmentId:t,doctorId:n,getAvailableSlotsForAllDoctors:i}=e;const{loading:s}=he(),[d,u]=(0,l.useState)(ra()()),[p,m]=(0,l.useState)(""),[h,x]=(0,l.useState)([]),v=(0,o.useDispatch)(),{doctorAvailableData:g}=(0,o.useSelector)((e=>(null===e||void 0===e?void 0:e.docAvailable)||[]));(0,l.useEffect)((()=>{if(null!==g&&void 0!==g&&g.data){const a=null===g||void 0===g?void 0:g.data.find((e=>e.doctorId===n));if(a){var e;const t=(null===(e=a.specialitySlots)||void 0===e?void 0:e.flatMap((e=>e.availableSlots)))||[];x(t)}}}),[g,n]);const b=h.filter((e=>{if(!d)return!1;if(ra()(d).format("YYYY-MM-DD")===ra()().format("YYYY-MM-DD")){return e>=ra()().format("HH:mm")}return!0}));return(0,J.jsxs)(r.Dialog,{open:!0,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,children:[s&&(0,J.jsx)(r.Typography,{align:"center",children:"Loading..."}),(0,J.jsx)(r.DialogTitle,{children:"Reschedule Appointment"}),(0,J.jsx)(r.DialogContent,{children:(0,J.jsx)(c.LocalizationProvider,{dateAdapter:na.R,children:(0,J.jsxs)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[(0,J.jsxs)("div",{children:[(0,J.jsx)(r.Typography,{variant:"body1",sx:{marginBottom:1},children:"Appointment Date"}),(0,J.jsx)(c.DatePicker,{value:d,onChange:e=>{u(e)},disablePast:!0,slotProps:{textField:{size:"small"}}})]}),(0,J.jsxs)("div",{children:[(0,J.jsx)(r.Typography,{variant:"body1",sx:{marginBottom:1},children:"Appointment Time"}),(0,J.jsx)(r.FormControl,{fullWidth:!0,size:"small",children:(0,J.jsx)(r.Select,{value:p,onChange:e=>{m(e.target.value)},displayEmpty:!0,placeholder:"Select Time",children:b.length>0?b.map(((e,a)=>(0,J.jsx)(r.MenuItem,{value:e,children:e},a))):(0,J.jsx)(r.MenuItem,{value:"",disabled:!0,children:"No slots available"})})})]})]})})}),(0,J.jsxs)(r.DialogActions,{children:[(0,J.jsx)(r.Button,{variant:"outlined",onClick:()=>a(!1),children:"Cancel"}),(0,J.jsx)(r.Button,{variant:"contained",color:"primary",onClick:async()=>{try{await v(it({appointmentId:t,appointmentDate:d.format("YYYY-MM-DD"),appointmentTime:p,doctorId:n})).unwrap(),await i(),a(),ne(["Appointment Re-scheduled successfully"],"success")}catch(e){ne([e||"Something went wrong"],"error")}},disabled:!p,children:"Ok"})]})]})},st={width:"30px",height:"30px",borderRadius:"50%",backgroundColor:"rgb(93, 104, 104)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"bold",textTransform:"uppercase",cursor:"pointer"},dt=e=>{var a;let{slotDuration:t=20,setEvents:n,getAvailableSlotsForAllDoctors:i}=e;const[s,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!1),[x,v]=(0,l.useState)(!1),g=(0,p.useNavigate)(),{doctorAvailableData:b}=(0,o.useSelector)((e=>(null===e||void 0===e?void 0:e.docAvailable)||[]));return(0,l.useEffect)((()=>{if(null===b||void 0===b||!b.data)return void console.warn("No doctorAvailableData found.");const e={};b.data.forEach((a=>{var t;null===a||void 0===a||null===(t=a.specialitySlots)||void 0===t||t.forEach((t=>{var l;null===t||void 0===t||null===(l=t.bookedSlotDetails)||void 0===l||l.forEach((l=>{const n=qe()(l.appointmentTime,"HH:mm").format("HH:mm"),i=`${a.doctorId}-${t.specialityId}`;e[n]||(e[n]={}),e[n][i]||(e[n][i]=[]),e[n][i].push({doctorId:a.doctorId,specialityId:t.specialityId,appointmentId:l.appointmentId,appointmentTime:l.appointmentTime,appointmentDate:l.appointmentDate,patientName:l.patientName||"--",phoneNo:l.phoneNo||"--",mrdNo:l.mrdNo||null,notes:l.notes||"--",gender:l.gender||"--",dob:l.dob||"--",age:l.age||"--"})}))}))}));const a=[];Object.entries(e).forEach((e=>{let[l,n]=e;Object.entries(n).forEach((e=>{let[n,i]=e;const o=i[0];console.log("slot",o),a.push({title:(0,J.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:1===i.length?(0,J.jsxs)("div",{className:"d-flex flex-row gap-3",children:[(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,J.jsx)("div",{style:st,children:o.mrdNo?"F":"N"}),(0,J.jsx)("span",{style:{fontWeight:"bold"},children:o.patientName||"--"})]}),(0,J.jsxs)("div",{className:"mt-1",children:["\xa0 ",(0,J.jsx)(U.Phone,{})," \xa0\xa0",o.phoneNo||"--"]}),(0,J.jsxs)("div",{className:"mt-1",children:["\xa0 ",(0,J.jsx)(U.Note,{})," \xa0\xa0",o.notes||"--"]})]}),(0,J.jsxs)(r.Box,{className:"d-flex flex-column flex-wrap",children:[(0,J.jsx)(r.Tooltip,{title:"Reschedule",children:(0,J.jsx)(r.IconButton,{onClick:()=>{h(!0),u(o)},sx:{padding:"2px",color:"blue",marginY:"3px"},children:(0,J.jsx)(U.Schedule,{})})}),(0,J.jsx)(r.Tooltip,{title:o.mrdNo?"Revisit":"Registration",children:(0,J.jsx)(r.IconButton,{onClick:()=>o.mrdNo?g("/secure/registration?tab=revist_registration",{state:{bookedDetails:o}}):g("/secure/registration?tab=register_patient",{state:{bookedDetails:o}}),sx:{padding:"2px",color:"green"},children:o.mrdNo?(0,J.jsx)(U.Replay,{}):(0,J.jsx)(U.AppRegistration,{})})}),(0,J.jsx)(r.Tooltip,{title:"Cancel",children:(0,J.jsx)(r.IconButton,{onClick:()=>{v(!0),u(o)},sx:{padding:"2px",color:"red"},children:(0,J.jsx)(U.Cancel,{})})})]})]}):i.map(((e,a)=>{var t;return(0,J.jsx)("div",{className:"slot-avatar",onClick:()=>{u(e),d(!0)},children:(null===(t=e.patientName)||void 0===t?void 0:t.charAt(0))||"--"},a)}))}),start:qe()(l,"HH:mm").toDate(),end:qe()(l,"HH:mm").add(t,"minutes").toDate(),resourceId:o.doctorId,specialityId:o.specialityId,appointmentId:o.appointmentId,className:"booked-slot"})}))})),"function"===typeof n&&n(a)}),[b,t]),(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(r.Dialog,{open:s,onClose:()=>d(!1),maxWidth:"sm",fullWidth:!0,children:[(0,J.jsx)(r.DialogTitle,{children:"Appointment Details"}),(0,J.jsx)(r.DialogContent,{children:c&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(r.Box,{className:"d-flex gap-2",style:{alignItems:"center"},children:[(0,J.jsx)("div",{style:st,children:(null===(a=c.patientName)||void 0===a?void 0:a.charAt(0))||"--"}),(0,J.jsx)("span",{style:{fontWeight:"bold"},children:c.patientName||"--"})]}),(0,J.jsxs)("div",{className:"mt-2",children:[(0,J.jsx)("i",{className:"bi bi-telephone m-1"})," ",c.phoneNo||"--"]})]})}),(0,J.jsxs)(r.DialogActions,{children:[(0,J.jsx)(r.Tooltip,{title:"Reschedule",children:(0,J.jsx)(r.IconButton,{onClick:()=>{h(!0),d(!1)},color:"primary",children:(0,J.jsx)(U.Schedule,{})})}),(0,J.jsx)(r.Tooltip,{title:"Cancel",children:(0,J.jsx)(r.IconButton,{onClick:()=>{v(!0),d(!1)},children:(0,J.jsx)(U.Cancel,{})})}),(0,J.jsx)(r.Tooltip,{title:"Registration",children:(0,J.jsx)(r.IconButton,{onClick:()=>{g("/secure/registration",{state:{bookedDetails:c}}),d(!1)},children:null!==c&&void 0!==c&&c.mrdNo?(0,J.jsx)(U.Replay,{}):(0,J.jsx)(U.AppRegistration,{})})}),(0,J.jsx)(r.Button,{onClick:()=>d(!1),children:"Close"})]})]}),x&&(0,J.jsx)(nt,{handleClose:()=>v(!1),appointmentId:null===c||void 0===c?void 0:c.appointmentId,getAvailableSlotsForAllDoctors:i}),m&&(0,J.jsx)(rt,{handleClose:()=>h(!1),appointmentId:null===c||void 0===c?void 0:c.appointmentId,doctorId:null===c||void 0===c?void 0:c.doctorId,getAvailableSlotsForAllDoctors:i})]})},ct=(0,Ka.A)(Ua.Calendar),ut=e=>{let{selectedDate:a,setSelectedDate:t,filteredDoctors:n,slotDuration:i,activeTab:s,selectedSpeciality:d}=e;const c=(0,Ua.momentLocalizer)(qe()),u=(0,o.useDispatch)(),[p,m]=(0,l.useState)([]),[h,x]=(0,l.useState)([]),[v,g]=(0,l.useState)(!1),[b,j]=(0,l.useState)(null),[y,f]=(0,l.useState)([]),[C,S]=(0,l.useState)(null),{doctorAvailableData:N,loading:w}=(0,o.useSelector)((e=>(null===e||void 0===e?void 0:e.docAvailable)||[]));(0,l.useEffect)((()=>{m(null===N||void 0===N?void 0:N.data)}),[N]);const I=(e,a,t)=>{if(!p||!Array.isArray(p))return!1;const l=p.find((e=>e.doctorId===Number(a)));if(!l||!l.specialitySlots)return!1;const n=l.specialitySlots.find((e=>e.specialityId===Number(t)));return!!n&&(n.availableSlots.includes(e)&&!n.bookedSlots.includes(e))},D=(e,a,t)=>{if(!p||!Array.isArray(p))return!1;const l=p.find((e=>e.doctorId===Number(a)));if(!l||!l.specialitySlots)return!1;const n=l.specialitySlots.find((e=>e.specialityId===Number(t)));return!!n&&n.bookedSlots.includes(e)},T=(0,l.useMemo)((()=>(e,a)=>{const t=(e=>qe()(e).format("HH:mm"))(e),l=I(t,a,d);let n="",i="#D0DDD0";return D(t,a,d)?(n="booked-slot",i="#9db4c0"):l&&(n="available-slot",i="#90e0ef"),{className:n,style:{backgroundColor:i,borderRadius:"3px"}}}),[p,d]),k=(0,l.useCallback)((()=>{if(a){const e=qe()(a).format("YYYY-MM-DD");u(Ja({interval:"TWENTY_MINUTES",date:e}))}}),[u,a,i]);(0,l.useEffect)((()=>{k()}),[k]);const A=(0,l.useCallback)((function(e){"users"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"users")&&x(e.map((e=>({id:e.doctorId,title:e.doctorName}))))}),[]);(0,l.useEffect)((()=>{n&&A(n,s)}),[n,s,A]);return(0,J.jsxs)(r.Box,{width:"100%",overflow:"auto",children:[(0,J.jsx)(Ra,{show:w}),(0,J.jsx)(dt,{slotDuration:i,setEvents:f,getAvailableSlotsForAllDoctors:k}),(0,J.jsx)(ct,{date:a,selectable:!0,localizer:c,events:y.map((e=>({...e,title:e.title||"No Title"}))),resources:h,resourceIdAccessor:"id",resourceTitleAccessor:"title",onNavigate:t,startAccessor:"start",endAccessor:"end",style:{height:"80vh",width:"100%"},step:i,timeslots:1,views:["day","agenda"],defaultView:"day",onSelectSlot:e=>{const a=qe()(e.start).format("HH:mm"),t=e.resourceId,l=d;if(qe()(e.start).isBefore(qe()(),"minute"))return void ne(["You cannot select a past time slot."],"error");const n=I(a,t,l),i=D(a,t,l);if(n||i){const a=p.find((e=>e.doctorId===Number(t)));if(a){const e=a.specialitySlots.find((e=>e.specialityId===Number(l)));S({...a,selectedSpecialityData:e})}j(e),g(!0)}else ne(["The selected time slot is not available."],"error")},toolbar:!0,eventPropGetter:e=>({style:{backgroundColor:"inherit",color:"black",marginTop:"5px",border:"none",outline:"none"}}),slotPropGetter:T,scrollToTime:new Date(1970,1,1,9,0,0),onEventDrop:async e=>{let{event:a,start:t,end:l,resourceId:n}=e;if(qe()(t).isBefore(qe()(),"minute"))return void ne(["You cannot move an appointment to a past time."],"error");const i=qe()(t).format("YYYY-MM-DD"),o=qe()(t).format("HH:mm");try{await u(it({appointmentId:a.appointmentId,appointmentDate:i,appointmentTime:o,doctorId:n})).unwrap(),f((e=>e.map((e=>e.appointmentId===a.appointmentId?{...e,start:t,end:l,resourceId:n}:e)))),await k(),ne(["Appointment rescheduled successfully."],"success")}catch(r){ne([(null===r||void 0===r?void 0:r.message)||"Failed to reschedule appointment."],"error")}},draggableAccessor:()=>!0,resizableAccessor:()=>!1},y.length),v&&(0,J.jsx)(at,{open:v,setOpen:g,selectedSlot:b,handleClose:()=>g(!1),activeTab:s,slotDuration:i,getAvailableSlotsForAllDoctors:k,setSelectedSlot:j,slotInfo:b,selecteddoctorData:C,addEventToState:e=>{e.title?f([...y,e]):console.error("Event title is missing!",e)}})]})},pt=()=>{const e=(0,o.useDispatch)(),[a,t]=(0,l.useState)(!0),[n,i]=(0,l.useState)(new Date),[s,d]=(0,l.useState)("users"),[c,u]=(0,l.useState)(""),[p,m]=(0,l.useState)(""),[h,x]=(0,l.useState)(""),{doctorData:v,docloading:g}=(0,o.useSelector)((e=>null===e||void 0===e?void 0:e.allDoctor)),b=(null===v||void 0===v?void 0:v.data)||[],{data:j}=(0,o.useSelector)((e=>null===e||void 0===e?void 0:e.allBranch)),y=null===j||void 0===j?void 0:j.data;console.log("branchData",y);const f=g;(0,l.useEffect)((()=>{e(Re())}),[e]);const C=c?b.filter((e=>e.specialityId===c)):[];return(0,J.jsxs)(r.Box,{display:"flex",width:"100%",children:[(0,J.jsx)(Ra,{show:f}),(0,J.jsxs)("div",{children:[(0,J.jsx)("div",{children:(0,J.jsx)("button",{onClick:()=>t(!a),style:{backgroundColor:"#F0F8F8",color:"#333",border:"1px solid #ccc",borderRadius:"8px",padding:"5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.1)",cursor:"pointer",fontSize:"12px",transition:"background-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease"},children:a?(0,J.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,J.jsx)(U.ChevronLeft,{}),(0,J.jsx)("span",{style:{fontWeight:"500"},children:"Filter Calendar"})]}):(0,J.jsx)(U.ChevronRight,{})})}),a&&(0,J.jsxs)(r.Box,{width:"280px",overflow:"auto",maxHeight:"calc(100vh - 80px)",borderRight:"1px solid #ccc",padding:"5px",children:[(0,J.jsx)(mt,{value:qe()(n),onChange:e=>i(e.toDate())}),(0,J.jsx)(r.Box,{mt:2,children:(0,J.jsx)(Ce,{tabsList:[{name:"Doctors",value:"users"},{name:"Rooms",value:"rooms"}],defaultTab:"users",setActiveTab:d})}),"users"===s&&(0,J.jsxs)(r.Box,{display:"flex",flexDirection:"column",gap:2,mt:1,children:[(0,J.jsxs)(r.FormControl,{fullWidth:!0,size:"small",children:[(0,J.jsx)(r.InputLabel,{children:"Select Branch"}),(0,J.jsxs)(r.Select,{value:p,onChange:e=>{var a;const t=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"";m(t);const l=null===y||void 0===y?void 0:y.find((e=>e.branchName===t));x((null===l||void 0===l?void 0:l.branchName)||"")},label:"Select Branch",children:[(0,J.jsx)(r.MenuItem,{value:"",children:"Select"}),null===y||void 0===y?void 0:y.map((e=>(0,J.jsx)(r.MenuItem,{value:null===e||void 0===e?void 0:e.branchName,children:null===e||void 0===e?void 0:e.branchName},null===e||void 0===e?void 0:e.branchId)))]})]}),(0,J.jsxs)(r.FormControl,{fullWidth:!0,size:"small",disabled:!h,children:[(0,J.jsx)(r.InputLabel,{children:"Select Speciality"}),(0,J.jsxs)(r.Select,{value:c,onChange:e=>{var a;const t=(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"";u(t)},label:"Select Speciality",children:[(0,J.jsx)(Ra,{show:f}),(0,J.jsx)(r.MenuItem,{value:"",children:"Select"}),Array.from(new Map(b.filter((e=>e.branchName===h)).map((e=>[e.specialityId,{label:e.specialityName||"Unknown",value:e.specialityId}]))).values()).map((e=>(0,J.jsx)(r.MenuItem,{value:e.value,children:e.label},e.value)))]})]})]})]})]}),(0,J.jsx)(r.Box,{flex:1,sx:{ml:"10px"},children:(0,J.jsx)(r.Box,{flex:1,children:(0,J.jsx)(ut,{selectedDate:n,setSelectedDate:i,filteredDoctors:C,slotDuration:20,activeTab:s,selectedSpeciality:c})})})]})},mt=(0,r.styled)(c.DateCalendar)((()=>({backgroundColor:"#fff",maxHeight:"320px",width:"250px",transformOrigin:"top left","& .MuiDateCalendar-days":{fontSize:"12px"},"& .MuiPickersCalendarHeader-root":{backgroundColor:"#D0DDD0",fontSize:"14px"}}))),ht=()=>(0,J.jsx)("div",{children:(0,J.jsx)(pt,{})}),xt=(0,b.createAsyncThunk)("appointment/scheduleList",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(M,{params:e})}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),vt=(0,b.createSlice)({name:"scheduleList",initialState:{data:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(xt.pending,(e=>{e.loading=!0,e.error=null})).addCase(xt.fulfilled,((e,a)=>{e.loading=!1,e.data=a.payload.data})).addCase(xt.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,{Option:gt}=je.Select,bt=()=>{const[e,a]=(0,l.useState)({}),[t,n]=(0,l.useState)([]),[i,r]=(0,l.useState)(1),[s,d]=(0,l.useState)(5),c=(0,p.useNavigate)(),u=(0,o.useDispatch)(),{data:m,loading:h}=(0,o.useSelector)((e=>e.schedule)),x=null===m||void 0===m?void 0:m.data;(0,l.useEffect)((()=>{x&&n(x)}),[x]),(0,l.useEffect)((()=>{u(xt(e))}),[e,u]);const v=(e,t)=>{a((a=>({...a,[e]:t})))},g=[{name:"Create Patient Visit",icon:U.MedicalInformationOutlined,callback:e=>(e=>{console.log("reg data",e.data),e.data.mrdNo?c("/secure/registration?tab=revist_registration",{state:{data:e.data}}):c("/secure/registration?tab=register_patient",{state:{data:e.data}})})(e)}],b=[{title:"S.No",dataIndex:"sno",key:"sno",render:(e,a,t)=>(i-1)*s+t+1},{title:"Schedule Date",dataIndex:"scheduleDate",key:"scheduleDate",filterDropdown:()=>(0,J.jsx)(je.DatePicker,{format:"DD/MM/YYYY",onChange:e=>((e,t)=>{const l=t?qe()(t).format("DD/MM/YYYY"):"";a((a=>({...a,[e]:l})))})("scheduleDate",e)})},{title:"MR Number",dataIndex:"mrdNo",key:"mrdNo",filterDropdown:()=>(0,J.jsx)(je.Input,{placeholder:"Search MR Number",onChange:e=>v("mrdNo",e.target.value)})},{title:"Mobile",dataIndex:"mobile",key:"mobile",filterDropdown:()=>(0,J.jsx)(je.Input,{placeholder:"Search Mobile",onChange:e=>v("mobile",e.target.value)})},{title:"Patient Name",dataIndex:"patientName",key:"patientName",filterDropdown:()=>(0,J.jsx)(je.Input,{placeholder:"Search Patient Name",onChange:e=>v("patientName",e.target.value)})},{title:"Doctor",dataIndex:"doctorName",key:"doctorName",filterDropdown:()=>(0,J.jsx)(je.Input,{placeholder:"Search Doctor",onChange:e=>v("doctorName",e.target.value)})},{title:"Status",dataIndex:"appointmentStatus",key:"appointmentStatus",filterDropdown:()=>(0,J.jsxs)(je.Select,{style:{width:"100%"},onChange:e=>v("appointmentStatus",e),children:[(0,J.jsx)(gt,{value:"",children:"--All--"}),(0,J.jsx)(gt,{value:"re_confirmed",children:"Re-Confirmed"}),(0,J.jsx)(gt,{value:"booked",children:"Booked"}),(0,J.jsx)(gt,{value:"no_show",children:"No Show"}),(0,J.jsx)(gt,{value:"cancelled",children:"Cancelled"}),(0,J.jsx)(gt,{value:"arrived",children:"Arrived"}),(0,J.jsx)(gt,{value:"concluded",children:"Concluded"}),(0,J.jsx)(gt,{value:"being_seen",children:"Being Seen"})]})},{title:"Options",key:"actions",render:e=>(0,J.jsx)(Ma,{itemsArray:g,callbackParam:{data:e,from:"schedule_list"}})}];return(0,J.jsxs)("div",{children:[(0,J.jsx)(Ra,{show:h}),(0,J.jsx)(je.Table,{dataSource:t,columns:b,rowKey:e=>e.id,className:"table-container mt-3"})]})},{Option:jt}=je.Select,yt=()=>{const[e,a]=(0,l.useState)([{id:1,s_no:"1",mr_number:"23435455",visit_date:"27/12/2024",patient_name:"Mr. Praveen",doctor:"Mr. Jhon",recall_date:"27/12/2024",status:"Being Seen"},{id:2,s_no:"2",mr_number:"2345455",visit_date:"27/12/2024",patient_name:"Mr. Praveen",doctor:"Mr. Jhon",recall_date:"27/12/2024",status:"Being Seen"},{id:3,s_no:"3",mr_number:"5435t4555",visit_date:"27/12/2024",patient_name:"Mr. Praveen",doctor:"Mr. Jhon",recall_date:"27/12/2024",status:"Being Seen"}]),[t,n]=(0,l.useState)({}),[i,o]=(0,l.useState)(e);(0,l.useEffect)((()=>{let a=e.filter((e=>Object.keys(t).every((a=>!t[a]||("status"===a&&"--All--"===t[a]||String(e[a]).toLowerCase().includes(t[a].toLowerCase()))))));o(a)}),[t,e]);const r=(e,a)=>{n((t=>({...t,[e]:a})))},s=(e,a)=>{n((t=>({...t,[e]:a?qe()(a).format("DD/MM/YYYY"):""})))},d=[{title:"S.No",dataIndex:"s_no",key:"s_no",render:(e,a,t)=>t+1},{title:"MR Number",dataIndex:"mr_number",key:"mr_number",filterDropdown:()=>(0,J.jsx)(je.Input,{onChange:e=>r("mr_number",e.target.value)})},{title:"Visit Date",dataIndex:"visit_date",key:"visit_date",filterDropdown:()=>(0,J.jsx)(je.DatePicker,{onChange:e=>s("visit_date",e),format:"DD/MM/YYYY"})},{title:"Patient Name",dataIndex:"patient_name",key:"patient_name",filterDropdown:()=>(0,J.jsx)(je.Input,{onChange:e=>r("patient_name",e.target.value)})},{title:"Doctor",dataIndex:"doctor",key:"doctor",filterDropdown:()=>(0,J.jsx)(je.Input,{onChange:e=>r("doctor",e.target.value)})},{title:"Recall Date",dataIndex:"recall_date",key:"recall_date",filterDropdown:()=>(0,J.jsx)(je.DatePicker,{onChange:e=>s("recall_date",e),format:"DD/MM/YYYY"})},{title:"Status",dataIndex:"status",key:"status",filterDropdown:()=>(0,J.jsxs)(je.Select,{defaultValue:"--All--",onChange:e=>r("status",e),children:[(0,J.jsx)(jt,{value:"--All--",children:"--All--"}),(0,J.jsx)(jt,{value:"Re-Confirmed",children:"Re-Confirmed"}),(0,J.jsx)(jt,{value:"Booked",children:"Booked"}),(0,J.jsx)(jt,{value:"No Show",children:"No Show"}),(0,J.jsx)(jt,{value:"Cancelled",children:"Cancelled"}),(0,J.jsx)(jt,{value:"Arrived",children:"Arrived"}),(0,J.jsx)(jt,{value:"Concluded",children:"Concluded"}),(0,J.jsx)(jt,{value:"Being Seen",children:"Being Seen"})]})}];return(0,J.jsx)(je.Table,{columns:d,dataSource:i,rowKey:"id",pagination:{pageSize:5},className:"table-container mt-3"})},{Option:ft}=je.Select,Ct=()=>{const[e,a]=(0,l.useState)([{id:1,s_no:"1",mr_number:"23435455",patient_name:"Mr. Praveen",mobile:"9876543210",schedule_date:"27/12/2024",vaccination_name:"Covaccine",remarks:"Null",status:"Being Seen",vaccine_date:"27/12/2024"},{id:2,s_no:"2",mr_number:"432335455",patient_name:"Mr. Praveen",mobile:"9854643210",schedule_date:"07/11/2024",vaccination_name:"Covaccine",remarks:"Null",status:"Being Seen",vaccine_date:"12/10/2024"},{id:3,s_no:"3",mr_number:"412335455",patient_name:"Mr. Praveen",mobile:"4576543210",schedule_date:"12/09/2024",vaccination_name:"Covaccine",remarks:"Null",status:"Being Seen",vaccine_date:"11/06/2024"}]),[t,n]=(0,l.useState)({}),[i,o]=(0,l.useState)(e),r=["--All--","Re-Confirmed","Booked","No Show","Cancelled","Arrived","Concluded","Being Seen"],s=(e,a)=>{n((t=>({...t,[e]:a})))},d=(e,a)=>{const t=a?qe()(a).format("DD/MM/YYYY"):"";n((a=>({...a,[e]:t})))};(0,l.useEffect)((()=>{let a=e.filter((e=>Object.keys(t).every((a=>{var l;const n=(null===(l=t[a])||void 0===l?void 0:l.toLowerCase())||"";return!n||"--all--"===n||String(e[a]).toLowerCase().includes(n)}))));o(a)}),[t,e]);const c=[{title:"S.No",dataIndex:"s_no",key:"s_no"},{title:"MR Number",dataIndex:"mr_number",key:"mr_number",filterDropdown:()=>(0,J.jsx)(je.Input,{placeholder:"Search MR Number",onChange:e=>s("mr_number",e.target.value)})},{title:"Patient Name",dataIndex:"patient_name",key:"patient_name",filterDropdown:()=>(0,J.jsx)(je.Input,{placeholder:"Search Patient",onChange:e=>s("patient_name",e.target.value)})},{title:"Mobile",dataIndex:"mobile",key:"mobile",filterDropdown:()=>(0,J.jsx)(je.Input,{placeholder:"Search Mobile",onChange:e=>s("mobile",e.target.value)})},{title:"Schedule Date",dataIndex:"schedule_date",key:"schedule_date",filterDropdown:()=>(0,J.jsx)(je.DatePicker,{format:"DD/MM/YYYY",onChange:e=>d("schedule_date",e)})},{title:"Vaccination Name",dataIndex:"vaccination_name",key:"vaccination_name"},{title:"Remarks",dataIndex:"remarks",key:"remarks",filterDropdown:()=>(0,J.jsx)(je.Input,{placeholder:"Search Remarks",onChange:e=>s("remarks",e.target.value)})},{title:"Status",dataIndex:"status",key:"status",filterDropdown:()=>(0,J.jsx)(je.Select,{defaultValue:"--All--",onChange:e=>s("status",e),children:r.map(((e,a)=>(0,J.jsx)(ft,{value:e,children:e},a)))})},{title:"Vaccine Date",dataIndex:"vaccine_date",key:"vaccine_date",filterDropdown:()=>(0,J.jsx)(je.DatePicker,{format:"DD/MM/YYYY",onChange:e=>d("vaccine_date",e)})},{title:"Options",key:"actions",render:e=>(0,J.jsx)(Ma,{itemsArray:[{name:"Schedule Appointment",icon:U.Schedule}],callbackParam:{data:e,from:"schedule_list"}})}];return(0,J.jsx)("div",{children:(0,J.jsx)(je.Table,{dataSource:i,columns:c,rowKey:"id",pagination:{pageSize:5},bordered:!0,className:"table-container mt-3"})})},St=()=>{const[e,a]=(0,l.useState)("doctor_appointment");return(0,J.jsxs)(r.Box,{style:{width:"100%"},className:"p-3",children:[(0,J.jsx)(r.Box,{display:"flex",justifyContent:"space-between",children:(0,J.jsx)(Ce,{tabsList:[{name:"Doctor Appointment",value:"doctor_appointment",icon:""},{name:"Schedule List",value:"schedule_list",icon:""},{name:"Facility Schedule List",value:"facility_schedule_list",icon:""},{name:"Patient Recall",value:"patient_recall",icon:""},{name:"Patient Vaccination Schedules",value:"patient_vaccination_schedules",icon:""}],defaultTab:"doctor_appointment",setActiveTab:a})}),(0,J.jsxs)(r.Box,{width:"100%",children:["doctor_appointment"===e&&(0,J.jsx)(ht,{}),"schedule_list"===e&&(0,J.jsx)(bt,{}),"patient_recall"===e&&(0,J.jsx)(yt,{}),"patient_vaccination_schedules"===e&&(0,J.jsx)(Ct,{})]})]})},Nt=()=>{const[e,a]=(0,l.useState)(!1);return(0,J.jsx)("div",{children:e?(0,J.jsxs)("div",{className:"form-details-section mt-4",children:[(0,J.jsx)(Ie,{label:" No. of Branches"}),(0,J.jsx)(Ie,{label:"Logo",type:"file"}),(0,J.jsx)(Ie,{label:"TRN No"}),(0,J.jsx)(Ie,{label:"Location"}),(0,J.jsx)(Ie,{label:"DHA License No"}),(0,J.jsx)(Ie,{label:"Address"}),(0,J.jsx)(Ie,{label:"DHA User Name"}),(0,J.jsx)(Ie,{label:"Password"}),(0,J.jsx)(Ie,{label:"Email ID"}),(0,J.jsx)(Ie,{label:"Mobile No"}),(0,J.jsx)(Ie,{label:"Website Link"}),(0,J.jsx)("div",{children:(0,J.jsx)(r.Button,{color:"primary",children:"Create"})})]}):(0,J.jsxs)("div",{className:"form-details-section ",children:[(0,J.jsx)(Ie,{label:" Hospital Name"}),(0,J.jsx)(Ie,{label:"Address"}),(0,J.jsx)(Ie,{label:"Zone(district)"}),(0,J.jsx)(Ie,{label:"City"}),(0,J.jsx)(Ie,{label:"Postal Code"}),(0,J.jsx)("div",{children:(0,J.jsx)(r.Button,{color:"primary",onClick:()=>a(!0),children:"Save"})})]})})},wt=e=>{let{onClose:a}=e;return(0,J.jsx)(r.Dialog,{open:!0,onClose:a,fullWidth:!0,children:(0,J.jsxs)(r.DialogContent,{children:[(0,J.jsx)("h6",{children:"Edit Hospital"}),(0,J.jsxs)("div",{children:[(0,J.jsx)(Ie,{label:" Hospital Name"}),(0,J.jsx)(Ie,{label:"Address"}),(0,J.jsx)(Ie,{label:"Zone(district)"}),(0,J.jsx)(Ie,{label:"City"}),(0,J.jsx)(Ie,{label:"Postal Code"}),(0,J.jsx)("div",{children:(0,J.jsx)(r.Button,{children:"Update"})})]})]})})},It=e=>{let{onClose:a}=e;return(0,J.jsx)(r.Dialog,{open:!0,onClose:a,fullWidth:!0,children:(0,J.jsxs)(r.DialogContent,{children:[(0,J.jsx)("h6",{children:"Edit Branch"}),(0,J.jsxs)("div",{className:"form-container",children:[(0,J.jsx)(Ie,{label:" No. of Branches"}),(0,J.jsx)(Ie,{label:"Logo",type:"file"}),(0,J.jsx)(Ie,{label:"TRN No"}),(0,J.jsx)(Ie,{label:"Location"}),(0,J.jsx)(Ie,{label:"DHA License No"}),(0,J.jsx)(Ie,{label:"Address"}),(0,J.jsx)(Ie,{label:"DHA User Name"}),(0,J.jsx)(Ie,{label:"Password"}),(0,J.jsx)(Ie,{label:"Email ID"}),(0,J.jsx)(Ie,{label:"Mobile No"}),(0,J.jsx)(Ie,{label:"Website Link"}),(0,J.jsx)("div",{children:(0,J.jsx)(r.Button,{color:"primary",children:"Update"})})]})]})})},Dt=()=>{const[e,a]=(0,l.useState)(!1),[t,n]=(0,l.useState)(),[i,o]=(0,l.useState)(),s=[{title:"S No",dataIndex:"sNo",key:"sNo"},{title:"Branch Name",dataIndex:"BranchName",key:"BranchName"},{title:"Address",dataIndex:"address",key:"address"},{title:"Speciality/Department",dataIndex:"SpecialityDepartment",key:"SpecialityDepartment",render:(e,t)=>(0,J.jsx)("span",{style:{color:"blue",fontWeight:"bold",cursor:"pointer"},onClick:()=>{a(!0)},children:e})},{title:"Options",key:"actions",render:(e,a)=>(0,J.jsxs)("div",{children:[(0,J.jsx)(U.EditOutlined,{style:{color:"blue",cursor:"pointer"},onClick:()=>{o(!0)}}),(0,J.jsx)(U.DeleteOutline,{style:{color:"red",cursor:"pointer",marginLeft:"10px"},onClick:()=>{}})]})}];return(0,J.jsxs)("div",{children:[(0,J.jsx)(Nt,{}),(0,J.jsxs)("div",{className:"table-container",children:[(0,J.jsxs)("h6",{children:["ABC Hospital"," ",(0,J.jsx)("span",{children:(0,J.jsx)(r.IconButton,{size:"small",onClick:()=>n(!0),children:(0,J.jsx)(U.EditOutlined,{})})})]}),(0,J.jsx)(je.Table,{columns:s,dataSource:[{key:"1",sNo:1,BranchName:"ABC Hospital-Thanjavur",address:"123 Street, NY",SpecialityDepartment:"Add"},{key:"2",sNo:2,BranchName:"ABC Hospital-Kumbakonam",address:"456 Avenue, LA",SpecialityDepartment:""}],size:"middle",className:"m-4"})]}),t&&(0,J.jsx)(wt,{onClose:()=>n(!1)}),i&&(0,J.jsx)(It,{onClose:()=>o(!1)})]})},{TabPane:Tt}=je.Tabs,kt=()=>(0,J.jsx)("div",{className:"w-100 m-3",style:{overflow:"auto"},children:(0,J.jsxs)(je.Tabs,{defaultActiveKey:"1",type:"card",children:[(0,J.jsx)(Tt,{tab:"Org",children:(0,J.jsx)(Dt,{})},"1"),(0,J.jsx)(Tt,{tab:"Speciality"},"2"),(0,J.jsx)(Tt,{tab:"User Setup"},"3"),(0,J.jsx)(Tt,{tab:"InPatient"},"4"),(0,J.jsx)(Tt,{tab:"Appointment"},"5")]})}),At=n().lazy((()=>t.e(7294).then(t.t.bind(t,17294,23)))),Pt=n().lazy((()=>t.e(4992).then(t.t.bind(t,74992,23)))),Bt=n().lazy((()=>t.e(4435).then(t.t.bind(t,14435,23)))),Rt=n().lazy((()=>t.e(5837).then(t.t.bind(t,65837,23)))),_t=n().lazy((()=>t.e(881).then(t.t.bind(t,60881,23)))),Ft=n().lazy((()=>t.e(5887).then(t.t.bind(t,95887,23)))),Et=n().lazy((()=>t.e(8867).then(t.t.bind(t,68867,23)))),Lt=n().lazy((()=>t.e(9061).then(t.t.bind(t,39061,23)))),Mt=n().lazy((()=>t.e(1538).then(t.t.bind(t,91538,23)))),Ot=n().lazy((()=>t.e(3433).then(t.t.bind(t,33433,23)))),zt=n().lazy((()=>t.e(9987).then(t.t.bind(t,9987,23)))),Wt=[...ge,...[{path:"/secure",exact:!0,secure:!0,component:()=>(0,J.jsx)(p.Navigate,{to:"/secure/landing"})},{path:"/secure/landing",exact:!0,secure:!0,component:ee},{path:"/secure/appointment",exact:!0,secure:!0,component:St},{path:"/secure/registration",exact:!0,secure:!0,component:Je},{path:"/secure/billing/list",exact:!0,secure:!0,component:()=>{const e=(0,p.useNavigate)();return(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(At,{navigate:e})})}},{path:"/secure/billing/details",exact:!0,secure:!0,component:()=>(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(Pt,{})})},{path:"/secure/ipemr",exact:!0,secure:!0,component:()=>(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(Bt,{})})},{path:"/secure/bedandward",exact:!0,secure:!0,component:()=>{const e=(0,p.useNavigate)();return(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(Rt,{navigate:e})})}},{path:"/secure/bedandward/:name",exact:!0,secure:!0,component:()=>(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(_t,{})})},{path:"/secure/doctorEmr",exact:!0,secure:!0,component:()=>{const e=(0,p.useNavigate)();return(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(Ft,{navigate:e})})}},{path:"/secure/doctorEmr/ipDetails/:name",exact:!0,secure:!0,component:()=>(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(Et,{})})},{path:"/secure/doctorEmr/opDetails/:name",exact:!0,secure:!0,component:()=>(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(Lt,{})})},{path:"/secure/lab",exact:!0,secure:!0,component:()=>(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(zt,{})})},{path:"/secure/nurseEmr",exact:!0,secure:!0,component:()=>{const e=(0,p.useNavigate)();return(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(Mt,{navigate:e})})}},{path:"/secure/nurseEmr/:name",exact:!0,secure:!0,component:()=>(0,J.jsx)(l.Suspense,{fallback:(0,J.jsx)($a,{}),children:(0,J.jsx)(Ot,{})})},{path:"/secure/privileges",exact:!0,secure:!0,component:Ba},{path:"/secure/insurance",exact:!0,secure:!0,component:Ga},{path:"/doctor/dashboard",exact:!0,secure:!0,component:ka},{path:"/secure/master",exact:!0,secure:!0,component:kt}]];t(2574);const Yt=e=>{let{children:a}=e;return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(le.ToastContainer,{position:"top-right",autoClose:!1,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnHover:!0,closeButton:!1,theme:"light",toastClassName:e=>{let{type:a}=e;switch(a){case"success":return"toast-success";case"error":return"toast-error";case"warning":return"toast-warning";default:return"toast-info"}}}),a]})};t(83019),t(25008),t(99710);class Vt extends n().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,a){console.error("Error caught in Error Boundary:",e,a)}render(){return this.state.hasError?(0,J.jsx)("h3",{children:"Something went wrong. Please try again later."}):this.props.children}}const Ht=Vt,qt=(0,b.createAsyncThunk)("appointment/allAppointment",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(w,{params:e})}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),Gt=(0,b.createSlice)({name:"allAppointment",initialState:{data:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(qt.pending,(e=>{e.loading=!0,e.error=null})).addCase(qt.fulfilled,((e,a)=>{e.loading=!1,e.data=a.payload.data})).addCase(qt.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,$t=((0,b.createAsyncThunk)("docAvailable/updateSlot",(async(e,a)=>{let{appointmentId:t,doctorId:l,newTime:n,newDate:i}=e,{rejectWithValue:o}=a;try{return(await C.put(`/appointments/${t}/reschedule`,{doctorId:l,newTime:n,newDate:i})).data}catch(r){return o(r.response.data)}})),(0,b.createAsyncThunk)("facility/allFacilitySchedules",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(k,e)}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}}))),Ut=(0,b.createSlice)({name:"allFacilitySchedules",initialState:{facilitiesSheduleData:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase($t.pending,(e=>{e.loading=!0,e.error=null})).addCase($t.fulfilled,((e,a)=>{e.loading=!1,e.facilitiesSheduleData=a.payload.data})).addCase($t.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,Kt=(0,b.createAsyncThunk)("timeslot/facilitiesAvailability",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(A,{params:e})}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),Jt=(0,b.createSlice)({name:"facilitiesAvailability",initialState:{facilitiesAvailableData:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Kt.pending,(e=>{e.loading=!0,e.error=null})).addCase(Kt.fulfilled,((e,a)=>{e.loading=!1,e.facilitiesAvailableData=a.payload.data})).addCase(Kt.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,Qt=(0,b.createAsyncThunk)("facility/allFacilities",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(D,{params:e})}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),Xt=(0,b.createSlice)({name:"allFacilities",initialState:{facilitiesData:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Qt.pending,(e=>{e.loading=!0,e.error=null})).addCase(Qt.fulfilled,((e,a)=>{e.loading=!1,e.facilitiesData=a.payload.data})).addCase(Qt.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,Zt=(0,b.createAsyncThunk)("doctor/searchDoctors",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(P,{params:e})}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),el=(0,b.createSlice)({name:"searchDoctors",initialState:{searchdoctorData:[],searchDocloading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(Zt.pending,(e=>{e.searchDocloading=!0,e.error=null})).addCase(Zt.fulfilled,((e,a)=>{e.searchDocloading=!1,e.searchdoctorData=a.payload.data})).addCase(Zt.rejected,((e,a)=>{e.searchDocloading=!1,e.error=a.payload}))}}).reducer,al=(0,b.createAsyncThunk)("facility/searchFacilities",(async(e,a)=>{let{rejectWithValue:t}=a;try{return await C.get(B,{params:e})}catch(i){var l,n;return t(null===(l=i.response)||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message)}})),tl={auth:q,allBranch:$,allAppoint:Gt,allDoctor:_e,allFacility:Xt,docAvailable:Qa,facilitySchedule:Ut,facilityAvailable:Jt,searchDoctor:el,searchFacility:(0,b.createSlice)({name:"searchFacilities",initialState:{searchfacilityData:[],loading:!1,error:null},reducers:{},extraReducers:e=>{e.addCase(al.pending,(e=>{e.loading=!0,e.error=null})).addCase(al.fulfilled,((e,a)=>{e.loading=!1,e.searchfacilityData=a.payload.data})).addCase(al.rejected,((e,a)=>{e.loading=!1,e.error=a.payload}))}}).reducer,searchPatient:ze,regPatient:ke,revisit:Ye,emergency:Le,bookAppoint:Za,schedule:vt,reschedule:ot,cancel:lt,todayPatientList:$e},ll=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,b.combineReducers)({...tl,...e})},nl=(0,b.configureStore)({reducer:ll()});nl.asyncReducers={},nl.injectReducer=(e,a)=>{nl.asyncReducers[e]?console.warn(`Reducer "${e}" is already injected.`):(console.log(`Injecting reducer: ${e}`),nl.asyncReducers[e]=a,nl.replaceReducer(ll(nl.asyncReducers)),console.log("Updated Redux state:",nl.getState()))};const il=nl,ol=()=>{const[e,a]=(()=>{const[e,a]=(0,l.useState)("light"),t=(0,l.useMemo)((()=>({toggleColorMode:()=>a((e=>"light"===e?"dark":"light"))})),[]);return[(0,l.useMemo)((()=>(0,s.A)((e=>{const a=(e=>({..."dark"===e?{grey:{100:"#e0e0e0",200:"#c2c2c2",300:"#a3a3a3",400:"#858585",500:"#666666",600:"#525252",700:"#3d3d3d",800:"#292929",900:"#141414"},primary:{100:"#d0d1d5",200:"#a1a4ab",300:"#727681",400:"#1F2A40",500:"#011d65",600:"#101624",700:"#0c101b",800:"#080b12",900:"#040509"},greenAccent:{100:"#dbf5ee",200:"#b7ebde",300:"#94e2cd",400:"#70d8bd",500:"#4cceac",600:"#3da58a",700:"#2e7c67",800:"#1e5245",900:"#0f2922"},redAccent:{100:"#f8dcdb",200:"#f1b9b7",300:"#e99592",400:"#e2726e",500:"#db4f4a",600:"#af3f3b",700:"#832f2c",800:"#58201e",900:"#2c100f"},blueAccent:{100:"#e1e2fe",200:"#c3c6fd",300:"#a4a9fc",400:"#868dfb",500:"#6870fa",600:"#535ac8",700:"#3e4396",800:"#2a2d64",900:"#151632"}}:{grey:{100:"#141414",200:"#292929",300:"#3d3d3d",400:"#525252",500:"#666666",600:"#858585",700:"#a3a3a3",800:"#c2c2c2",900:"#e0e0e0"},primary:{100:"#040509",200:"#080b12",300:"#0c101b",400:"#f2f0f0",500:"#141b2d",600:"#1F2A40",700:"#727681",800:"#a1a4ab",900:"#d0d1d5"},greenAccent:{100:"#0f2922",200:"#1e5245",300:"#2e7c67",400:"#3da58a",500:"#4cceac",600:"#70d8bd",700:"#94e2cd",800:"#b7ebde",900:"#dbf5ee"},redAccent:{100:"#2c100f",200:"#58201e",300:"#832f2c",400:"#af3f3b",500:"#db4f4a",600:"#e2726e",700:"#e99592",800:"#f1b9b7",900:"#f8dcdb"},blueAccent:{100:"#151632",200:"#2a2d64",300:"#3e4396",400:"#535ac8",500:"#6870fa",600:"#868dfb",700:"#a4a9fc",800:"#c3c6fd",900:"#e1e2fe"}}}))(e);return{palette:{mode:e,..."dark"===e?{primary:{main:a.primary[500]},secondary:{main:a.greenAccent[500]},neutral:{dark:a.grey[700],main:a.grey[500],light:a.grey[100]},background:{default:a.primary[500]}}:{primary:{main:a.primary[100]},secondary:{main:a.greenAccent[500]},neutral:{dark:a.grey[700],main:a.grey[500],light:a.grey[100]},background:{default:"#fcfcfc"}}},typography:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:12,h1:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:40},h2:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:32},h3:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:24},h4:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:20},h5:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:16},h6:{fontFamily:["Source Sans Pro","sans-serif"].join(","),fontSize:14}}}})(e))),[e]),t]})();return(0,l.useEffect)((()=>{t.e(3895).then(t.t.bind(t,53895,23)).then((e=>{let{default:a}=e;console.log("Billing Reducer Loaded:",a),il.injectReducer&&il.injectReducer("billing",a)})).catch((e=>console.error("Failed to load billingReducer:",e))),t.e(895).then(t.t.bind(t,90895,23)).then((e=>{let{default:a}=e;console.log("ip Reducer Loaded:",a),il.injectReducer&&il.injectReducer("ip",a)})).catch((e=>console.error("Failed to load ipReducer:",e))),t.e(2589).then(t.t.bind(t,42589,23)).then((e=>{let{default:a}=e;console.log("bedAndWardReducer Loaded:",a),il.injectReducer&&il.injectReducer("bedAndWard",a)})).catch((e=>console.error("Failed to load bedAndWardReducer:",e)))}),[]),(0,J.jsx)(Ht,{children:(0,J.jsx)(o.Provider,{store:il,children:(0,J.jsx)(c.LocalizationProvider,{dateAdapter:u.Y,children:(0,J.jsx)(me,{children:(0,J.jsx)(d.Provider,{value:a,children:(0,J.jsx)(r.ThemeProvider,{theme:e,children:(0,J.jsxs)(Yt,{children:[(0,J.jsx)(r.CssBaseline,{}),(0,J.jsx)(te,{routes:Wt})]})})})})})})})};i.createRoot(document.getElementById("root")).render((0,J.jsx)(p.BrowserRouter,{children:(0,J.jsx)(ol,{})}))}}]);
//# sourceMappingURL=1232.8c8cde79.chunk.js.map